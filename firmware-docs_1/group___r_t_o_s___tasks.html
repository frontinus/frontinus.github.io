<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Da Vinci Firmware: RTOS Tasks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="PRT-logo-horizontal-dark-resized.png"/></td>
  <td id="projectalign">
   <div id="projectname">Da Vinci Firmware<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">Firmware for the DaVinci-M rocket avionics board.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('group___r_t_o_s___tasks.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">RTOS Tasks<div class="ingroups"><a class="el" href="group___r_t_o_s.html">RTOS Components</a></div></div></div>
</div><!--header-->
<div class="contents">

<p>Implementations of the main application threads (RTOS tasks).  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for RTOS Tasks:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks.png" border="0" usemap="#agroup______r__t__o__s______tasks" alt=""/></div>
<map name="agroup______r__t__o__s______tasks" id="agroup______r__t__o__s______tasks">
<area shape="rect" href="group___r_t_o_s.html" title="All tasks, queues, and semaphores for the real&#45;time operating system." alt="" coords="5,5,141,32"/>
<area shape="rect" title="Implementations of the main application threads (RTOS tasks)." alt="" coords="189,5,284,32"/>
</map>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga3271a69550bc5f9966c76521e5823891"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___r_t_o_s___tasks.html#ga3271a69550bc5f9966c76521e5823891">StartSensor_Task</a> (void *argument)</td></tr>
<tr class="memdesc:ga3271a69550bc5f9966c76521e5823891"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function implementing the Sensor_Task thread.  <br /></td></tr>
<tr class="separator:ga3271a69550bc5f9966c76521e5823891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga958596a1a00c9ec7bce777e773465f45"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___r_t_o_s___tasks.html#ga958596a1a00c9ec7bce777e773465f45">StartFSM</a> (void *argument)</td></tr>
<tr class="memdesc:ga958596a1a00c9ec7bce777e773465f45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function implementing the FSM thread.  <br /></td></tr>
<tr class="separator:ga958596a1a00c9ec7bce777e773465f45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1cebdfd5afb7fa2446390956a43828f4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___r_t_o_s___tasks.html#ga1cebdfd5afb7fa2446390956a43828f4">StartKalman_mkf</a> (void *argument)</td></tr>
<tr class="memdesc:ga1cebdfd5afb7fa2446390956a43828f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function implementing the Kalman_mkf thread.  <br /></td></tr>
<tr class="separator:ga1cebdfd5afb7fa2446390956a43828f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga66e1e49e54f627fbc12b6f818505c70c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___r_t_o_s___tasks.html#ga66e1e49e54f627fbc12b6f818505c70c">StartMPC_Task</a> (void *argument)</td></tr>
<tr class="memdesc:ga66e1e49e54f627fbc12b6f818505c70c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function implementing the MPC_Task thread.  <br /></td></tr>
<tr class="separator:ga66e1e49e54f627fbc12b6f818505c70c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Implementations of the main application threads (RTOS tasks). </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga958596a1a00c9ec7bce777e773465f45" name="ga958596a1a00c9ec7bce777e773465f45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga958596a1a00c9ec7bce777e773465f45">&#9670;&#160;</a></span>StartFSM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StartFSM </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function implementing the FSM thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argument</td><td>Not used</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l01721">1721</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1722</span>{</div>
<div class="line"><span class="lineno"> 1723</span>  <span class="comment">/* USER CODE BEGIN StartFSM */</span></div>
<div class="line"><span class="lineno"> 1724</span>    osDelay(50);</div>
<div class="line"><span class="lineno"> 1725</span>    HAL_TIM_Base_Start_IT(&amp;<a class="code hl_variable" href="main_8c.html#a14ed9010da24d22abca21fbe3dfca55d">htim13</a>);</div>
<div class="line"><span class="lineno"> 1726</span>  <span class="comment">/* Infinite loop */</span></div>
<div class="line"><span class="lineno"> 1727</span>  <span class="keywordflow">for</span>(;;)</div>
<div class="line"><span class="lineno"> 1728</span>  {</div>
<div class="line"><span class="lineno"> 1729</span>      osThreadFlagsWait(<a class="code hl_define" href="main_8c.html#ade1de89bef914bc2548b6155bc6a5344">FSM_FLAG</a>, osFlagsWaitAny, osWaitForever);</div>
<div class="line"><span class="lineno"> 1730</span> </div>
<div class="line"><span class="lineno"> 1731</span>      <a class="code hl_struct" href="structlinear__acceleration__t.html">linear_acceleration_t</a> acc1;</div>
<div class="line"><span class="lineno"> 1732</span>      acc1.<a class="code hl_variable" href="structlinear__acceleration__t.html#a4f5de47239c8474ecb6c1f8ec40ebdb4">accX</a> = <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[0];</div>
<div class="line"><span class="lineno"> 1733</span>      acc1.<a class="code hl_variable" href="structlinear__acceleration__t.html#a5a13b120b0082971879f32669d288394">accY</a> = <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[1];</div>
<div class="line"><span class="lineno"> 1734</span>      acc1.<a class="code hl_variable" href="structlinear__acceleration__t.html#a37134b353ff1e70fddb443e252366f79">accZ</a> = <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[2];</div>
<div class="line"><span class="lineno"> 1735</span> </div>
<div class="line"><span class="lineno"> 1736</span>      <a class="code hl_struct" href="structestimation__output__t.html">estimation_output_t</a> MotionData;</div>
<div class="line"><span class="lineno"> 1737</span>      MotionData.<a class="code hl_variable" href="structestimation__output__t.html#af53c6cccea55ce648c678f9c5a43c1ec">acceleration</a> = sqrt(</div>
<div class="line"><span class="lineno"> 1738</span>              <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[0]*<a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[0] +</div>
<div class="line"><span class="lineno"> 1739</span>              <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[1]*<a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[1] +</div>
<div class="line"><span class="lineno"> 1740</span>              <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[2]*<a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[2]);</div>
<div class="line"><span class="lineno"> 1741</span>      MotionData.<a class="code hl_variable" href="structestimation__output__t.html#aa8de49abb95e45d9f0ba2ae0aa90ba31">velocity</a> = <a class="code hl_variable" href="main_8c.html#ab0a3df7e43ce8ebff885530aaa663739">velocity</a>;</div>
<div class="line"><span class="lineno"> 1742</span>      MotionData.<a class="code hl_variable" href="structestimation__output__t.html#abb80b0a1dfae15b7abca1d0bd3c5f5ff">height</a> = <a class="code hl_variable" href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a>;</div>
<div class="line"><span class="lineno"> 1743</span> </div>
<div class="line"><span class="lineno"> 1744</span>      <span class="comment">/* Check Flight Phases */</span></div>
<div class="line"><span class="lineno"> 1745</span>      <a class="code hl_function" href="flight__control_8c.html#a47306eb52262845f0284a01226c787ca">check_flight_phase</a>(&amp;<a class="code hl_variable" href="main_8c.html#a2c247b36691d4fee60fe40bab779aa5f">flight_state</a>,MotionData, acc1);</div>
<div class="line"><span class="lineno"> 1746</span>  }</div>
<div class="line"><span class="lineno"> 1747</span>  <span class="comment">/* USER CODE END StartFSM */</span></div>
<div class="line"><span class="lineno"> 1748</span>}</div>
<div class="ttc" id="aflight__control_8c_html_a47306eb52262845f0284a01226c787ca"><div class="ttname"><a href="flight__control_8c.html#a47306eb52262845f0284a01226c787ca">check_flight_phase</a></div><div class="ttdeci">void check_flight_phase(flight_fsm_t *phase, estimation_output_t MotionData, linear_acceleration_t acc_data)</div><div class="ttdoc">Main FSM router function that delegates to the current state's handler.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8c_source.html#l00017">flight_control.c:17</a></div></div>
<div class="ttc" id="amain_8c_html_a14ed9010da24d22abca21fbe3dfca55d"><div class="ttname"><a href="main_8c.html#a14ed9010da24d22abca21fbe3dfca55d">htim13</a></div><div class="ttdeci">TIM_HandleTypeDef htim13</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00068">main.c:68</a></div></div>
<div class="ttc" id="amain_8c_html_a1832f94702f253abf0aecda476d87d6e"><div class="ttname"><a href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a></div><div class="ttdeci">static float_t acceleration_mg_1[3]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00132">main.c:132</a></div></div>
<div class="ttc" id="amain_8c_html_a2c247b36691d4fee60fe40bab779aa5f"><div class="ttname"><a href="main_8c.html#a2c247b36691d4fee60fe40bab779aa5f">flight_state</a></div><div class="ttdeci">flight_fsm_t flight_state</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00117">main.c:117</a></div></div>
<div class="ttc" id="amain_8c_html_a3516728342a262892154a029df3625e2"><div class="ttname"><a href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a></div><div class="ttdeci">float_t altitude</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00224">main.c:224</a></div></div>
<div class="ttc" id="amain_8c_html_ab0a3df7e43ce8ebff885530aaa663739"><div class="ttname"><a href="main_8c.html#ab0a3df7e43ce8ebff885530aaa663739">velocity</a></div><div class="ttdeci">float_t velocity</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00225">main.c:225</a></div></div>
<div class="ttc" id="amain_8c_html_ade1de89bef914bc2548b6155bc6a5344"><div class="ttname"><a href="main_8c.html#ade1de89bef914bc2548b6155bc6a5344">FSM_FLAG</a></div><div class="ttdeci">#define FSM_FLAG</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00287">main.c:287</a></div></div>
<div class="ttc" id="astructestimation__output__t_html"><div class="ttname"><a href="structestimation__output__t.html">estimation_output_t</a></div><div class="ttdoc">Holds the primary outputs of the state estimation filter (e.g., Kalman filter).</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00058">flight_control.h:58</a></div></div>
<div class="ttc" id="astructestimation__output__t_html_aa8de49abb95e45d9f0ba2ae0aa90ba31"><div class="ttname"><a href="structestimation__output__t.html#aa8de49abb95e45d9f0ba2ae0aa90ba31">estimation_output_t::velocity</a></div><div class="ttdeci">float_t velocity</div><div class="ttdoc">Vertical velocity in meters per second (m/s).</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00060">flight_control.h:60</a></div></div>
<div class="ttc" id="astructestimation__output__t_html_abb80b0a1dfae15b7abca1d0bd3c5f5ff"><div class="ttname"><a href="structestimation__output__t.html#abb80b0a1dfae15b7abca1d0bd3c5f5ff">estimation_output_t::height</a></div><div class="ttdeci">float_t height</div><div class="ttdoc">Vertical altitude above ground level in meters (m).</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00059">flight_control.h:59</a></div></div>
<div class="ttc" id="astructestimation__output__t_html_af53c6cccea55ce648c678f9c5a43c1ec"><div class="ttname"><a href="structestimation__output__t.html#af53c6cccea55ce648c678f9c5a43c1ec">estimation_output_t::acceleration</a></div><div class="ttdeci">float_t acceleration</div><div class="ttdoc">Vertical acceleration in meters per second squared (m/s^2).</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00061">flight_control.h:61</a></div></div>
<div class="ttc" id="astructlinear__acceleration__t_html"><div class="ttname"><a href="structlinear__acceleration__t.html">linear_acceleration_t</a></div><div class="ttdoc">Represents a 3-axis linear acceleration vector from an IMU.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00048">flight_control.h:48</a></div></div>
<div class="ttc" id="astructlinear__acceleration__t_html_a37134b353ff1e70fddb443e252366f79"><div class="ttname"><a href="structlinear__acceleration__t.html#a37134b353ff1e70fddb443e252366f79">linear_acceleration_t::accZ</a></div><div class="ttdeci">float_t accZ</div><div class="ttdoc">Acceleration along the Z-axis in m/s^2.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00051">flight_control.h:51</a></div></div>
<div class="ttc" id="astructlinear__acceleration__t_html_a4f5de47239c8474ecb6c1f8ec40ebdb4"><div class="ttname"><a href="structlinear__acceleration__t.html#a4f5de47239c8474ecb6c1f8ec40ebdb4">linear_acceleration_t::accX</a></div><div class="ttdeci">float_t accX</div><div class="ttdoc">Acceleration along the X-axis in m/s^2.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00049">flight_control.h:49</a></div></div>
<div class="ttc" id="astructlinear__acceleration__t_html_a5a13b120b0082971879f32669d288394"><div class="ttname"><a href="structlinear__acceleration__t.html#a5a13b120b0082971879f32669d288394">linear_acceleration_t::accY</a></div><div class="ttdeci">float_t accY</div><div class="ttdoc">Acceleration along the Y-axis in m/s^2.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00050">flight_control.h:50</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flight__control_8h_source.html#l00061">estimation_output_t::acceleration</a>, <a class="el" href="main_8c_source.html#l00132">acceleration_mg_1</a>, <a class="el" href="flight__control_8h_source.html#l00049">linear_acceleration_t::accX</a>, <a class="el" href="flight__control_8h_source.html#l00050">linear_acceleration_t::accY</a>, <a class="el" href="flight__control_8h_source.html#l00051">linear_acceleration_t::accZ</a>, <a class="el" href="main_8c_source.html#l00224">altitude</a>, <a class="el" href="flight__control_8c_source.html#l00017">check_flight_phase()</a>, <a class="el" href="main_8c_source.html#l00117">flight_state</a>, <a class="el" href="main_8c_source.html#l00287">FSM_FLAG</a>, <a class="el" href="flight__control_8h_source.html#l00059">estimation_output_t::height</a>, <a class="el" href="main_8c_source.html#l00068">htim13</a>, <a class="el" href="flight__control_8h_source.html#l00060">estimation_output_t::velocity</a>, and <a class="el" href="main_8c_source.html#l00225">velocity</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00399">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks_ga958596a1a00c9ec7bce777e773465f45_cgraph.png" border="0" usemap="#agroup___r_t_o_s___tasks_ga958596a1a00c9ec7bce777e773465f45_cgraph" alt=""/></div>
<map name="agroup___r_t_o_s___tasks_ga958596a1a00c9ec7bce777e773465f45_cgraph" id="agroup___r_t_o_s___tasks_ga958596a1a00c9ec7bce777e773465f45_cgraph">
<area shape="rect" title="Function implementing the FSM thread." alt="" coords="5,148,83,175"/>
<area shape="rect" href="flight__control_8c.html#a47306eb52262845f0284a01226c787ca" title="Main FSM router function that delegates to the current state&#39;s handler." alt="" coords="131,148,264,175"/>
<area shape="poly" title=" " alt="" coords="83,159,115,159,115,164,83,164"/>
<area shape="rect" href="flight__control_8c.html#a3633e4bb35c5a119ca032439db0d985a" title="Handler for the ABCSDEPLOYED state (apogee control)." alt="" coords="322,5,470,48"/>
<area shape="poly" title=" " alt="" coords="209,146,252,103,311,58,318,53,321,58,313,62,255,107,213,149"/>
<area shape="rect" href="flight__control_8c.html#a2044ea22f9d0a5b3c53b269e4f1be508" title="Handler for the BURNING state (powered ascent)." alt="" coords="321,72,470,99"/>
<area shape="poly" title=" " alt="" coords="226,145,311,108,330,101,332,106,313,113,228,150"/>
<area shape="rect" href="flight__control_8c.html#a2d929a4793ee883e3e7bdabe0deea72e" title="Handler for the CALIBRATING state." alt="" coords="312,275,479,301"/>
<area shape="poly" title=" " alt="" coords="212,173,254,216,283,240,313,260,325,266,322,271,311,265,279,244,251,220,209,177"/>
<area shape="rect" href="flight__control_8c.html#ad67c8fa956febe3c7a883f7fa2b268b0" title="Handler for the DROGUE state (descent under drogue parachute)." alt="" coords="322,123,469,149"/>
<area shape="poly" title=" " alt="" coords="264,150,306,145,307,150,265,155"/>
<area shape="rect" href="flight__control_8c.html#aba82f61bcce6a03c81dae2533ab2431e" title="Handler for the LIFTOFF state." alt="" coords="327,173,464,200"/>
<area shape="poly" title=" " alt="" coords="265,167,312,173,311,179,264,172"/>
<area shape="rect" href="flight__control_8c.html#a8116659c0af7f3f1abd980d8013e2654" title="Handler for the MAIN state (descent under main parachute)." alt="" coords="329,224,462,251"/>
<area shape="poly" title=" " alt="" coords="228,173,313,210,332,216,330,221,311,214,226,178"/>
<area shape="rect" href="flight__control_8c.html#ac501a7c6c60c2b8c9cd9d0e7d328c80c" title="Handles the mechanics of a state transition." alt="" coords="527,148,645,175"/>
<area shape="poly" title=" " alt="" coords="460,46,481,58,528,96,566,134,562,138,525,100,478,62,457,51"/>
<area shape="rect" href="flight__control_8c.html#a2453e798beaa2b27f6468db201f7861a" title=" " alt="" coords="732,148,864,175"/>
<area shape="poly" title=" " alt="" coords="645,159,716,159,716,164,645,164"/>
<area shape="poly" title=" " alt="" coords="447,97,480,108,547,138,544,143,478,113,446,102"/>
<area shape="poly" title=" " alt="" coords="454,272,478,260,525,224,562,185,566,189,529,228,481,265,456,276"/>
<area shape="rect" href="group___winbond___memory.html#gad6301bd88db8e497c5382bda891bac6f" title=" " alt="" coords="536,275,636,301"/>
<area shape="poly" title=" " alt="" coords="480,285,521,285,521,291,480,291"/>
<area shape="rect" href="group___winbond___control.html#gaefb0b18c1b05043f2ce91b1be9be11be" title=" " alt="" coords="693,224,904,251"/>
<area shape="poly" title=" " alt="" coords="636,274,724,252,725,257,637,279"/>
<area shape="rect" href="z__qflash___w25_q_x_x_x_8c.html#afb89e02b295e274a464decd984e2f0c5" title=" " alt="" coords="711,275,886,301"/>
<area shape="poly" title=" " alt="" coords="636,285,695,285,695,291,636,291"/>
<area shape="rect" href="group___winbond___status.html#gaf93b34eaf38e118fc173c4c0d5abe5f7" title="enables writes" alt="" coords="728,325,868,352"/>
<area shape="poly" title=" " alt="" coords="637,297,725,319,724,324,636,302"/>
<area shape="rect" href="group___winbond___status.html#gaa0c97f126a0945f1a2cdbaa2258a0d73" title=" " alt="" coords="952,275,1092,301"/>
<area shape="poly" title=" " alt="" coords="861,249,946,268,944,273,860,254"/>
<area shape="poly" title=" " alt="" coords="886,285,936,285,936,291,886,291"/>
<area shape="poly" title=" " alt="" coords="860,322,944,303,946,308,861,327"/>
<area shape="poly" title=" " alt="" coords="470,143,512,149,512,154,469,148"/>
<area shape="poly" title=" " alt="" coords="464,175,511,169,512,174,465,180"/>
<area shape="poly" title=" " alt="" coords="446,221,478,210,544,180,547,184,480,214,447,226"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks_ga958596a1a00c9ec7bce777e773465f45_icgraph.png" border="0" usemap="#agroup___r_t_o_s___tasks_ga958596a1a00c9ec7bce777e773465f45_icgraph" alt=""/></div>
<map name="agroup___r_t_o_s___tasks_ga958596a1a00c9ec7bce777e773465f45_icgraph" id="agroup___r_t_o_s___tasks_ga958596a1a00c9ec7bce777e773465f45_icgraph">
<area shape="rect" title="Function implementing the FSM thread." alt="" coords="103,5,180,32"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="ga1cebdfd5afb7fa2446390956a43828f4" name="ga1cebdfd5afb7fa2446390956a43828f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1cebdfd5afb7fa2446390956a43828f4">&#9670;&#160;</a></span>StartKalman_mkf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StartKalman_mkf </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function implementing the Kalman_mkf thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argument</td><td>Not used</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>
<p>gnss_flag 0: no fix dal GNSS, 1:fix dal GNSS</p>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l01758">1758</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1759</span>{</div>
<div class="line"><span class="lineno"> 1760</span>  <span class="comment">/* USER CODE BEGIN StartKalman_mkf */</span></div>
<div class="line"><span class="lineno"> 1761</span>    <span class="keyword">static</span> uint32_t prescaler = 0;</div>
<div class="line"><span class="lineno"> 1762</span> </div>
<div class="line"><span class="lineno"> 1763</span>    <span class="comment">/* Infinite loop */</span></div>
<div class="line"><span class="lineno"> 1764</span>    <span class="keywordflow">for</span>(;;) {</div>
<div class="line"><span class="lineno"> 1765</span>        osThreadFlagsWait(<a class="code hl_define" href="main_8c.html#aa38bc52990f2c6d377b3c6a36e211536">KALMAN_FLAG</a>, osFlagsWaitAny, osWaitForever);</div>
<div class="line"><span class="lineno"> 1766</span> </div>
<div class="line"><span class="lineno"> 1767</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="group___global___variables.html#gac214107f44ddc446c55d6c07952198f7">flag_attitude</a>) {</div>
<div class="line"><span class="lineno"> 1768</span>          <a class="code hl_function" href="attitude__estimation_8c.html#a269f239b757a2b09023e6cab0c3f9857">attitude_estimation</a>(<a class="code hl_variable" href="main_8c.html#ab4c3f2083fd1184ce7aa0a233db26e00">q</a>,0.01,<a class="code hl_variable" href="main_8c.html#a6f4cfa41c70f50ef4b5700aef52e6799">omega</a>[0],<a class="code hl_variable" href="main_8c.html#a6f4cfa41c70f50ef4b5700aef52e6799">omega</a>[1],<a class="code hl_variable" href="main_8c.html#a6f4cfa41c70f50ef4b5700aef52e6799">omega</a>[2],&amp;<a class="code hl_variable" href="main_8c.html#a20f4c4490bc8ecbdd1ffcb79acce6035">alpha</a>,<a class="code hl_variable" href="main_8c.html#a5f90928b96a5400ea15a859630e94260">q_new</a>);</div>
<div class="line"><span class="lineno"> 1769</span>          <a class="code hl_variable" href="main_8c.html#a20f4c4490bc8ecbdd1ffcb79acce6035">alpha</a> = M_PI/2 - <a class="code hl_variable" href="main_8c.html#a20f4c4490bc8ecbdd1ffcb79acce6035">alpha</a>;</div>
<div class="line"><span class="lineno"> 1770</span>          <span class="comment">//mekf(q,beta,P,omega, b_B, 0.0, q_new, beta_new, P_new); //mekf tinkered because of the magnetometers question, Height_AGL was replaced with permanent 0</span></div>
<div class="line"><span class="lineno"> 1771</span>          memcpy(<a class="code hl_variable" href="main_8c.html#ab4c3f2083fd1184ce7aa0a233db26e00">q</a>,<a class="code hl_variable" href="main_8c.html#a5f90928b96a5400ea15a859630e94260">q_new</a>,<span class="keyword">sizeof</span>(<a class="code hl_variable" href="main_8c.html#a5f90928b96a5400ea15a859630e94260">q_new</a>));</div>
<div class="line"><span class="lineno"> 1772</span>        }</div>
<div class="line"><span class="lineno"> 1773</span> </div>
<div class="line"><span class="lineno"> 1774</span>        <span class="comment">//memcpy(beta,beta_new,sizeof(beta_new));</span></div>
<div class="line"><span class="lineno"> 1775</span>        <span class="comment">//memcpy(P,P_new,sizeof(P_new));</span></div>
<div class="line"><span class="lineno"> 1776</span><span class="comment">//--------------------------------------------------------------------------------------------- TODO : to b e reintroduced with the actual mekf</span></div>
<div class="line"><span class="lineno"> 1777</span>     <span class="comment">// z_component = 1 - 2*( q[0]*q[0] + q[1]*q[1] );</span></div>
<div class="line"><span class="lineno"> 1778</span> </div>
<div class="line"><span class="lineno"> 1779</span>     <span class="comment">// if(z_component &lt; - 1){</span></div>
<div class="line"><span class="lineno"> 1780</span>    <span class="comment">//    z_component = -1.0;</span></div>
<div class="line"><span class="lineno"> 1781</span>     <span class="comment">// }</span></div>
<div class="line"><span class="lineno"> 1782</span>     <span class="comment">// else if(z_component &gt;  1){</span></div>
<div class="line"><span class="lineno"> 1783</span>    <span class="comment">//    z_component = 1.0;</span></div>
<div class="line"><span class="lineno"> 1784</span>      <span class="comment">//}</span></div>
<div class="line"><span class="lineno"> 1785</span> </div>
<div class="line"><span class="lineno"> 1786</span>      <span class="comment">//alpha = acos(z_component);</span></div>
<div class="line"><span class="lineno"> 1787</span><span class="comment">//----------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1788</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="group___global___variables.html#ga1cf27eef143ce97274946c621c1b5c6c">flag_kf</a>) {</div>
<div class="line"><span class="lineno"> 1789</span>            <a class="code hl_function" href="kalman_filter_8c.html#a1fff7672f4eeb228af668489616dc25d">kalmanFilter</a>(<a class="code hl_variable" href="main_8c.html#aeb25ec73d62f86439923fd8f39fb1261">x_est</a>, <a class="code hl_variable" href="main_8c.html#aeadd0ac231bb870411b0061d39c02482">P_2</a>, <a class="code hl_variable" href="main_8c.html#ad1148f8e4558391676a82f3dcc0165ff">z</a>, <a class="code hl_variable" href="main_8c.html#a20f4c4490bc8ecbdd1ffcb79acce6035">alpha</a>, <a class="code hl_variable" href="main_8c.html#a454c0957f2c571d20c930b99a933d3fe">a_m</a>, <a class="code hl_variable" href="main_8c.html#af23a80339eee6ced11526853ebd18a68">Ts</a>, <a class="code hl_variable" href="main_8c.html#ad3abb693476fba2ed2c23e63de561f32">Q</a>, <a class="code hl_variable" href="main_8c.html#a8523517a36ba1d96b83ca850602e30fa">R</a>,<a class="code hl_variable" href="main_8c.html#a06d46e80084705a9cbb3b55360ab816f">gnss_flag</a>); </div>
<div class="line"><span class="lineno"> 1790</span>            <a class="code hl_variable" href="main_8c.html#a06d46e80084705a9cbb3b55360ab816f">gnss_flag</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1791</span>            <a class="code hl_variable" href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a> = <a class="code hl_variable" href="main_8c.html#aeb25ec73d62f86439923fd8f39fb1261">x_est</a>[0];</div>
<div class="line"><span class="lineno"> 1792</span>            <a class="code hl_variable" href="main_8c.html#ab0a3df7e43ce8ebff885530aaa663739">velocity</a> = <a class="code hl_variable" href="main_8c.html#aeb25ec73d62f86439923fd8f39fb1261">x_est</a>[1];</div>
<div class="line"><span class="lineno"> 1793</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1794</span>            <a class="code hl_variable" href="main_8c.html#ab0a3df7e43ce8ebff885530aaa663739">velocity</a> = <a class="code hl_variable" href="main_8c.html#ab89cebf5103a1392207f4384554b1775">gps_vel</a>;</div>
<div class="line"><span class="lineno"> 1795</span>        }</div>
<div class="line"><span class="lineno"> 1796</span> </div>
<div class="line"><span class="lineno"> 1797</span>        <span class="keywordflow">if</span>((<a class="code hl_variable" href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a> == 4 || <a class="code hl_variable" href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a> == 8) &amp;&amp; <a class="code hl_variable" href="group___global___variables.html#ga9944ecd09a3da3fa55c8c1846ba56f6d">flag_flash</a> == <span class="keyword">true</span>){</div>
<div class="line"><span class="lineno"> 1798</span>            ++prescaler;</div>
<div class="line"><span class="lineno"> 1799</span> </div>
<div class="line"><span class="lineno"> 1800</span>            <span class="keywordflow">if</span> (prescaler == 25) { <span class="comment">// 1 second</span></div>
<div class="line"><span class="lineno"> 1801</span>                prescaler = 0;</div>
<div class="line"><span class="lineno"> 1802</span>                <span class="comment">//toggle_led();</span></div>
<div class="line"><span class="lineno"> 1803</span>                LED_TOGGLE(GPIO_LED1_GPIO_Port,GPIO_LED1_Pin);</div>
<div class="line"><span class="lineno"> 1804</span>            }</div>
<div class="line"><span class="lineno"> 1805</span> </div>
<div class="line"><span class="lineno"> 1806</span> </div>
<div class="line"><span class="lineno"> 1807</span>            <span class="keywordflow">if</span>(<a class="code hl_variable" href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a> == 4) {</div>
<div class="line"><span class="lineno"> 1808</span>                memcpy(<a class="code hl_variable" href="main_8c.html#a92c8050fdf1a55284307ca363167fd11">cpy_buffer</a>,<a class="code hl_variable" href="main_8c.html#a6c573dc02bda30a466ca6f4f446ccd23">data_buffer</a>,2112);</div>
<div class="line"><span class="lineno"> 1809</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a> == 8) {</div>
<div class="line"><span class="lineno"> 1810</span>                memcpy(<a class="code hl_variable" href="main_8c.html#a92c8050fdf1a55284307ca363167fd11">cpy_buffer</a>,<a class="code hl_variable" href="main_8c.html#a6c573dc02bda30a466ca6f4f446ccd23">data_buffer</a>+2112,2112);</div>
<div class="line"><span class="lineno"> 1811</span>            }</div>
<div class="line"><span class="lineno"> 1812</span> </div>
<div class="line"><span class="lineno"> 1813</span>            <a class="code hl_variable" href="main_8c.html#a3503720b26c400204ea22588e3e7380f">flash_address</a> = (<a class="code hl_variable" href="main_8c.html#a3b2c2d4589c605fa75c19e6e87efd9f4">num_of_lin_acc_saved_flash</a>)*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_linear___i_m_u___package.html">Linear_IMU_Package</a>) + (<a class="code hl_variable" href="main_8c.html#a3caab50741a3a83008a68ae1d775e867">num_of_saved_rest_packages_flash</a>)*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_data___package__no___linear___i_m_u.html">Data_Package_no_Linear_IMU</a>) +4;</div>
<div class="line"><span class="lineno"> 1814</span>            <a class="code hl_variable" href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a> = 0;</div>
<div class="line"><span class="lineno"> 1815</span> </div>
<div class="line"><span class="lineno"> 1816</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="main_8c.html#a3503720b26c400204ea22588e3e7380f">flash_address</a> &gt;= (67108864 - 211200)) {</div>
<div class="line"><span class="lineno"> 1817</span>                <a class="code hl_variable" href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a> = 0;</div>
<div class="line"><span class="lineno"> 1818</span>                <a class="code hl_variable" href="group___global___variables.html#ga9944ecd09a3da3fa55c8c1846ba56f6d">flag_flash</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1819</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1820</span>                <a class="code hl_function" href="group___winbond___memory.html#gad6301bd88db8e497c5382bda891bac6f">QFlash_Write</a>(<a class="code hl_variable" href="main_8c.html#a3503720b26c400204ea22588e3e7380f">flash_address</a>,(uint8_t*) <a class="code hl_variable" href="main_8c.html#a92c8050fdf1a55284307ca363167fd11">cpy_buffer</a>,<span class="keyword">sizeof</span>(<a class="code hl_variable" href="main_8c.html#a92c8050fdf1a55284307ca363167fd11">cpy_buffer</a>));</div>
<div class="line"><span class="lineno"> 1821</span>                <a class="code hl_variable" href="main_8c.html#a3b2c2d4589c605fa75c19e6e87efd9f4">num_of_lin_acc_saved_flash</a> += 160;</div>
<div class="line"><span class="lineno"> 1822</span>                <a class="code hl_variable" href="main_8c.html#a3caab50741a3a83008a68ae1d775e867">num_of_saved_rest_packages_flash</a> += 4;</div>
<div class="line"><span class="lineno"> 1823</span>            }</div>
<div class="line"><span class="lineno"> 1824</span>        }</div>
<div class="line"><span class="lineno"> 1825</span>    }</div>
<div class="line"><span class="lineno"> 1826</span>  <span class="comment">/* USER CODE END StartKalman_mkf */</span></div>
<div class="line"><span class="lineno"> 1827</span>}</div>
<div class="ttc" id="aattitude__estimation_8c_html_a269f239b757a2b09023e6cab0c3f9857"><div class="ttname"><a href="attitude__estimation_8c.html#a269f239b757a2b09023e6cab0c3f9857">attitude_estimation</a></div><div class="ttdeci">void attitude_estimation(const double quat[4], double ts, double omega_x, double omega_y, double omega_z, double *alpha, double quat_new[4])</div><div class="ttdoc">Propagates the rocket's attitude quaternion and calculates the angle from vertical.</div><div class="ttdef"><b>Definition</b> <a href="attitude__estimation_8c_source.html#l00027">attitude_estimation.c:27</a></div></div>
<div class="ttc" id="agroup___global___variables_html_ga1cf27eef143ce97274946c621c1b5c6c"><div class="ttname"><a href="group___global___variables.html#ga1cf27eef143ce97274946c621c1b5c6c">flag_kf</a></div><div class="ttdeci">bool flag_kf</div><div class="ttdoc">RTOS event flag to trigger the Kalman Filter task.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00301">main.c:301</a></div></div>
<div class="ttc" id="agroup___global___variables_html_ga9944ecd09a3da3fa55c8c1846ba56f6d"><div class="ttname"><a href="group___global___variables.html#ga9944ecd09a3da3fa55c8c1846ba56f6d">flag_flash</a></div><div class="ttdeci">bool flag_flash</div><div class="ttdoc">RTOS event flag to trigger the data logging task.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00307">main.c:307</a></div></div>
<div class="ttc" id="agroup___global___variables_html_gac214107f44ddc446c55d6c07952198f7"><div class="ttname"><a href="group___global___variables.html#gac214107f44ddc446c55d6c07952198f7">flag_attitude</a></div><div class="ttdeci">bool flag_attitude</div><div class="ttdoc">RTOS event flag to trigger the attitude estimation task.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00302">main.c:302</a></div></div>
<div class="ttc" id="agroup___winbond___memory_html_gad6301bd88db8e497c5382bda891bac6f"><div class="ttname"><a href="group___winbond___memory.html#gad6301bd88db8e497c5382bda891bac6f">QFlash_Write</a></div><div class="ttdeci">HAL_StatusTypeDef QFlash_Write(uint32_t addr, uint8_t *data, uint32_t dataSize)</div><div class="ttdef"><b>Definition</b> <a href="z__qflash___w25_q_x_x_x_8c_source.html#l00875">z_qflash_W25QXXX.c:875</a></div></div>
<div class="ttc" id="akalman_filter_8c_html_a1fff7672f4eeb228af668489616dc25d"><div class="ttname"><a href="kalman_filter_8c.html#a1fff7672f4eeb228af668489616dc25d">kalmanFilter</a></div><div class="ttdeci">void kalmanFilter(double x_est[2], double P[4], const double z[2], double alpha, double a_m, double Ts, const double Q[4], const double R[4], bool gnss_signal)</div><div class="ttdoc">Executes one prediction and correction step of the Kalman filter.</div><div class="ttdef"><b>Definition</b> <a href="kalman_filter_8c_source.html#l00049">kalmanFilter.c:49</a></div></div>
<div class="ttc" id="amain_8c_html_a06d46e80084705a9cbb3b55360ab816f"><div class="ttname"><a href="main_8c.html#a06d46e80084705a9cbb3b55360ab816f">gnss_flag</a></div><div class="ttdeci">bool gnss_flag</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00300">main.c:300</a></div></div>
<div class="ttc" id="amain_8c_html_a20f4c4490bc8ecbdd1ffcb79acce6035"><div class="ttname"><a href="main_8c.html#a20f4c4490bc8ecbdd1ffcb79acce6035">alpha</a></div><div class="ttdeci">double alpha</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00249">main.c:249</a></div></div>
<div class="ttc" id="amain_8c_html_a3503720b26c400204ea22588e3e7380f"><div class="ttname"><a href="main_8c.html#a3503720b26c400204ea22588e3e7380f">flash_address</a></div><div class="ttdeci">uint32_t flash_address</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00308">main.c:308</a></div></div>
<div class="ttc" id="amain_8c_html_a3b2c2d4589c605fa75c19e6e87efd9f4"><div class="ttname"><a href="main_8c.html#a3b2c2d4589c605fa75c19e6e87efd9f4">num_of_lin_acc_saved_flash</a></div><div class="ttdeci">uint32_t num_of_lin_acc_saved_flash</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00314">main.c:314</a></div></div>
<div class="ttc" id="amain_8c_html_a3caab50741a3a83008a68ae1d775e867"><div class="ttname"><a href="main_8c.html#a3caab50741a3a83008a68ae1d775e867">num_of_saved_rest_packages_flash</a></div><div class="ttdeci">uint32_t num_of_saved_rest_packages_flash</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00315">main.c:315</a></div></div>
<div class="ttc" id="amain_8c_html_a454c0957f2c571d20c930b99a933d3fe"><div class="ttname"><a href="main_8c.html#a454c0957f2c571d20c930b99a933d3fe">a_m</a></div><div class="ttdeci">double a_m</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00250">main.c:250</a></div></div>
<div class="ttc" id="amain_8c_html_a5f90928b96a5400ea15a859630e94260"><div class="ttname"><a href="main_8c.html#a5f90928b96a5400ea15a859630e94260">q_new</a></div><div class="ttdeci">double q_new[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00243">main.c:243</a></div></div>
<div class="ttc" id="amain_8c_html_a6c573dc02bda30a466ca6f4f446ccd23"><div class="ttname"><a href="main_8c.html#a6c573dc02bda30a466ca6f4f446ccd23">data_buffer</a></div><div class="ttdeci">uint8_t data_buffer[4224]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00309">main.c:309</a></div></div>
<div class="ttc" id="amain_8c_html_a6f4cfa41c70f50ef4b5700aef52e6799"><div class="ttname"><a href="main_8c.html#a6f4cfa41c70f50ef4b5700aef52e6799">omega</a></div><div class="ttdeci">double omega[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00240">main.c:240</a></div></div>
<div class="ttc" id="amain_8c_html_a8523517a36ba1d96b83ca850602e30fa"><div class="ttname"><a href="main_8c.html#a8523517a36ba1d96b83ca850602e30fa">R</a></div><div class="ttdeci">const double R[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00253">main.c:253</a></div></div>
<div class="ttc" id="amain_8c_html_a92c8050fdf1a55284307ca363167fd11"><div class="ttname"><a href="main_8c.html#a92c8050fdf1a55284307ca363167fd11">cpy_buffer</a></div><div class="ttdeci">uint8_t cpy_buffer[2112]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00310">main.c:310</a></div></div>
<div class="ttc" id="amain_8c_html_aa38bc52990f2c6d377b3c6a36e211536"><div class="ttname"><a href="main_8c.html#aa38bc52990f2c6d377b3c6a36e211536">KALMAN_FLAG</a></div><div class="ttdeci">#define KALMAN_FLAG</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00286">main.c:286</a></div></div>
<div class="ttc" id="amain_8c_html_ab4c3f2083fd1184ce7aa0a233db26e00"><div class="ttname"><a href="main_8c.html#ab4c3f2083fd1184ce7aa0a233db26e00">q</a></div><div class="ttdeci">double q[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00237">main.c:237</a></div></div>
<div class="ttc" id="amain_8c_html_ab89cebf5103a1392207f4384554b1775"><div class="ttname"><a href="main_8c.html#ab89cebf5103a1392207f4384554b1775">gps_vel</a></div><div class="ttdeci">float gps_vel</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00293">main.c:293</a></div></div>
<div class="ttc" id="amain_8c_html_ad1148f8e4558391676a82f3dcc0165ff"><div class="ttname"><a href="main_8c.html#ad1148f8e4558391676a82f3dcc0165ff">z</a></div><div class="ttdeci">double z[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00248">main.c:248</a></div></div>
<div class="ttc" id="amain_8c_html_ad3abb693476fba2ed2c23e63de561f32"><div class="ttname"><a href="main_8c.html#ad3abb693476fba2ed2c23e63de561f32">Q</a></div><div class="ttdeci">const double Q[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00252">main.c:252</a></div></div>
<div class="ttc" id="amain_8c_html_ae389ef02c92670e5f124bb3549341593"><div class="ttname"><a href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a></div><div class="ttdeci">uint32_t num_of_saved_rest_packages_locked</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00313">main.c:313</a></div></div>
<div class="ttc" id="amain_8c_html_aeadd0ac231bb870411b0061d39c02482"><div class="ttname"><a href="main_8c.html#aeadd0ac231bb870411b0061d39c02482">P_2</a></div><div class="ttdeci">double P_2[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00247">main.c:247</a></div></div>
<div class="ttc" id="amain_8c_html_aeb25ec73d62f86439923fd8f39fb1261"><div class="ttname"><a href="main_8c.html#aeb25ec73d62f86439923fd8f39fb1261">x_est</a></div><div class="ttdeci">double x_est[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00254">main.c:254</a></div></div>
<div class="ttc" id="amain_8c_html_af23a80339eee6ced11526853ebd18a68"><div class="ttname"><a href="main_8c.html#af23a80339eee6ced11526853ebd18a68">Ts</a></div><div class="ttdeci">double Ts</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00251">main.c:251</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html">Data_Package_no_Linear_IMU</a></div><div class="ttdoc">A comprehensive sensor data packet, excluding linear acceleration.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00166">main.c:166</a></div></div>
<div class="ttc" id="astruct_linear___i_m_u___package_html"><div class="ttname"><a href="struct_linear___i_m_u___package.html">Linear_IMU_Package</a></div><div class="ttdoc">Represents a 3-axis linear acceleration data packet.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00149">main.c:149</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8c_source.html#l00250">a_m</a>, <a class="el" href="main_8c_source.html#l00249">alpha</a>, <a class="el" href="main_8c_source.html#l00224">altitude</a>, <a class="el" href="attitude__estimation_8c_source.html#l00027">attitude_estimation()</a>, <a class="el" href="main_8c_source.html#l00310">cpy_buffer</a>, <a class="el" href="main_8c_source.html#l00309">data_buffer</a>, <a class="el" href="main_8c_source.html#l00302">flag_attitude</a>, <a class="el" href="main_8c_source.html#l00307">flag_flash</a>, <a class="el" href="main_8c_source.html#l00301">flag_kf</a>, <a class="el" href="main_8c_source.html#l00308">flash_address</a>, <a class="el" href="main_8c_source.html#l00300">gnss_flag</a>, <a class="el" href="main_8c_source.html#l00293">gps_vel</a>, <a class="el" href="main_8c_source.html#l00286">KALMAN_FLAG</a>, <a class="el" href="kalman_filter_8c_source.html#l00049">kalmanFilter()</a>, <a class="el" href="main_8c_source.html#l00314">num_of_lin_acc_saved_flash</a>, <a class="el" href="main_8c_source.html#l00315">num_of_saved_rest_packages_flash</a>, <a class="el" href="main_8c_source.html#l00313">num_of_saved_rest_packages_locked</a>, <a class="el" href="main_8c_source.html#l00240">omega</a>, <a class="el" href="main_8c_source.html#l00247">P_2</a>, <a class="el" href="main_8c_source.html#l00237">q</a>, <a class="el" href="main_8c_source.html#l00252">Q</a>, <a class="el" href="main_8c_source.html#l00243">q_new</a>, <a class="el" href="z__qflash___w25_q_x_x_x_8c_source.html#l00875">QFlash_Write()</a>, <a class="el" href="main_8c_source.html#l00253">R</a>, <a class="el" href="main_8c_source.html#l00251">Ts</a>, <a class="el" href="main_8c_source.html#l00225">velocity</a>, <a class="el" href="main_8c_source.html#l00254">x_est</a>, and <a class="el" href="main_8c_source.html#l00248">z</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00399">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks_ga1cebdfd5afb7fa2446390956a43828f4_cgraph.png" border="0" usemap="#agroup___r_t_o_s___tasks_ga1cebdfd5afb7fa2446390956a43828f4_cgraph" alt=""/></div>
<map name="agroup___r_t_o_s___tasks_ga1cebdfd5afb7fa2446390956a43828f4_cgraph" id="agroup___r_t_o_s___tasks_ga1cebdfd5afb7fa2446390956a43828f4_cgraph">
<area shape="rect" title="Function implementing the Kalman_mkf thread." alt="" coords="5,56,128,83"/>
<area shape="rect" href="attitude__estimation_8c.html#a269f239b757a2b09023e6cab0c3f9857" title="Propagates the rocket&#39;s attitude quaternion and calculates the angle from vertical." alt="" coords="176,5,307,32"/>
<area shape="poly" title=" " alt="" coords="115,53,177,34,179,39,116,58"/>
<area shape="rect" href="kalman_filter_8c.html#a1fff7672f4eeb228af668489616dc25d" title="Executes one prediction and correction step of the Kalman filter." alt="" coords="195,56,288,83"/>
<area shape="poly" title=" " alt="" coords="128,67,180,67,180,72,128,72"/>
<area shape="rect" href="group___winbond___memory.html#gad6301bd88db8e497c5382bda891bac6f" title=" " alt="" coords="191,107,292,133"/>
<area shape="poly" title=" " alt="" coords="116,81,179,99,177,104,115,86"/>
<area shape="rect" href="eye_8c.html#a8c43278f5ad0020912d83a595acc01ae" title="Creates a 4x4 identity matrix, typically for attitude calculations." alt="" coords="414,5,507,32"/>
<area shape="poly" title=" " alt="" coords="307,16,399,16,399,21,307,21"/>
<area shape="rect" href="group___winbond___control.html#gaefb0b18c1b05043f2ce91b1be9be11be" title=" " alt="" coords="355,56,566,83"/>
<area shape="poly" title=" " alt="" coords="291,106,384,84,385,89,292,111"/>
<area shape="rect" href="z__qflash___w25_q_x_x_x_8c.html#afb89e02b295e274a464decd984e2f0c5" title=" " alt="" coords="373,107,548,133"/>
<area shape="poly" title=" " alt="" coords="292,117,358,117,358,123,292,123"/>
<area shape="rect" href="group___winbond___status.html#gaf93b34eaf38e118fc173c4c0d5abe5f7" title="enables writes" alt="" coords="390,157,531,184"/>
<area shape="poly" title=" " alt="" coords="292,129,385,151,384,156,291,134"/>
<area shape="rect" href="group___winbond___status.html#gaa0c97f126a0945f1a2cdbaa2258a0d73" title=" " alt="" coords="614,107,755,133"/>
<area shape="poly" title=" " alt="" coords="524,81,608,100,607,105,522,86"/>
<area shape="poly" title=" " alt="" coords="549,117,598,117,598,123,549,123"/>
<area shape="poly" title=" " alt="" coords="522,154,607,135,608,140,524,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks_ga1cebdfd5afb7fa2446390956a43828f4_icgraph.png" border="0" usemap="#agroup___r_t_o_s___tasks_ga1cebdfd5afb7fa2446390956a43828f4_icgraph" alt=""/></div>
<map name="agroup___r_t_o_s___tasks_ga1cebdfd5afb7fa2446390956a43828f4_icgraph" id="agroup___r_t_o_s___tasks_ga1cebdfd5afb7fa2446390956a43828f4_icgraph">
<area shape="rect" title="Function implementing the Kalman_mkf thread." alt="" coords="103,5,225,32"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="ga66e1e49e54f627fbc12b6f818505c70c" name="ga66e1e49e54f627fbc12b6f818505c70c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga66e1e49e54f627fbc12b6f818505c70c">&#9670;&#160;</a></span>StartMPC_Task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StartMPC_Task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function implementing the MPC_Task thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argument</td><td>Not used</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l01837">1837</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1838</span>{</div>
<div class="line"><span class="lineno"> 1839</span>  <span class="comment">/* USER CODE BEGIN StartMPC_Task */</span></div>
<div class="line"><span class="lineno"> 1840</span>    <span class="keyword">static</span> uint32_t prescaler = 0;</div>
<div class="line"><span class="lineno"> 1841</span>    osDelay(50);</div>
<div class="line"><span class="lineno"> 1842</span>    HAL_TIM_Base_Start_IT(&amp;<a class="code hl_variable" href="main_8c.html#abb71bf3ee68e2a051fbeec6c3ab3012d">htim7</a>);</div>
<div class="line"><span class="lineno"> 1843</span> </div>
<div class="line"><span class="lineno"> 1844</span>  <span class="comment">/* Infinite loop */</span></div>
<div class="line"><span class="lineno"> 1845</span>  <span class="keywordflow">for</span>(;;)</div>
<div class="line"><span class="lineno"> 1846</span>  {</div>
<div class="line"><span class="lineno"> 1847</span>      osThreadFlagsWait(<a class="code hl_define" href="main_8c.html#a34c3c4d1beb806ca38a7eb23b6d4f9fd">MPC_FLAG</a>, osFlagsWaitAny, osWaitForever);</div>
<div class="line"><span class="lineno"> 1848</span>      HAL_ADC_Start(&amp;<a class="code hl_variable" href="main_8c.html#a984624bcf28d1b2fb7e4e18349f65d5c">hadc3</a>);</div>
<div class="line"><span class="lineno"> 1849</span>      HAL_ADC_PollForConversion(&amp;<a class="code hl_variable" href="main_8c.html#a984624bcf28d1b2fb7e4e18349f65d5c">hadc3</a>, HAL_MAX_DELAY);</div>
<div class="line"><span class="lineno"> 1850</span>      <a class="code hl_variable" href="main_8c.html#ab56a2c476dbdb2957b4640ecfe044c15">adcVal</a> =(HAL_ADC_GetValue(&amp;<a class="code hl_variable" href="main_8c.html#a984624bcf28d1b2fb7e4e18349f65d5c">hadc3</a>));</div>
<div class="line"><span class="lineno"> 1851</span>      HAL_ADC_Stop(&amp;<a class="code hl_variable" href="main_8c.html#a984624bcf28d1b2fb7e4e18349f65d5c">hadc3</a>);</div>
<div class="line"><span class="lineno"> 1852</span>      <a class="code hl_variable" href="main_8c.html#a923c93d247c3b501b51050b00a6cee43">Vin</a>=((<a class="code hl_variable" href="main_8c.html#ab56a2c476dbdb2957b4640ecfe044c15">adcVal</a>/3180.0f)*3.09f);</div>
<div class="line"><span class="lineno"> 1853</span>      <a class="code hl_variable" href="main_8c.html#a3b47c7a618e6b6e16efa4f1a261f14ca">Vr</a>=(<a class="code hl_variable" href="main_8c.html#a923c93d247c3b501b51050b00a6cee43">Vin</a>*((2700.0f+4700.0f)/2700.0f));</div>
<div class="line"><span class="lineno"> 1854</span>      <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#a60a8279e3f525cece1dc378bd73194bd">Battery_Voltage</a> = <a class="code hl_variable" href="main_8c.html#a3b47c7a618e6b6e16efa4f1a261f14ca">Vr</a>;</div>
<div class="line"><span class="lineno"> 1855</span> </div>
<div class="line"><span class="lineno"> 1856</span>      <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#a16bde7c189c07be95baf7f584b27c7ad">acc_x</a> = <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[0];</div>
<div class="line"><span class="lineno"> 1857</span>      <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#a5c4d1fc0baea8eb1c46d0779351efd18">acc_y</a> = <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[1];</div>
<div class="line"><span class="lineno"> 1858</span>      <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#aa453c71bf1235a95bbeaed059adfeb3b">acc_z</a> = <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[2];</div>
<div class="line"><span class="lineno"> 1859</span>      <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#af4d0dfe8acaf4df00444b9d0abda2993">dps_x</a> = <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[0];</div>
<div class="line"><span class="lineno"> 1860</span>      <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#aa9e9a5f71f82e66193377ea18bc2f5e6">dps_y</a> = <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[1];</div>
<div class="line"><span class="lineno"> 1861</span>      <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#af3b104f1ebc8f629c3f99c21fc738f23">dps_z</a> = <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[2];</div>
<div class="line"><span class="lineno"> 1862</span>      <span class="keywordflow">switch</span> (<a class="code hl_variable" href="main_8c.html#a2c247b36691d4fee60fe40bab779aa5f">flight_state</a>.<a class="code hl_variable" href="structflight__fsm__t.html#aa261111fbfd39bc2e3e292c60b467dda">flight_state</a>){</div>
<div class="line"><span class="lineno"> 1863</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3aef2863a469df3ea6871d640e3669a2f2">INVALID</a>:</div>
<div class="line"><span class="lineno"> 1864</span>                    <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">phase</a> = 0;</div>
<div class="line"><span class="lineno"> 1865</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1866</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a418c789b8bc517c5c1cf05dbfc5c45e0">CALIBRATING</a>:</div>
<div class="line"><span class="lineno"> 1867</span>                    <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">phase</a> = 1;</div>
<div class="line"><span class="lineno"> 1868</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1869</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a78cda93fcedb1dc8abd154cc187e6730">LIFTOFF</a>:</div>
<div class="line"><span class="lineno"> 1870</span>                    <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">phase</a> = 2;</div>
<div class="line"><span class="lineno"> 1871</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1872</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3ad790b28b6f6640a2aeb099fdd740566b">BURNING</a>:</div>
<div class="line"><span class="lineno"> 1873</span>                    <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">phase</a> = 3;</div>
<div class="line"><span class="lineno"> 1874</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1875</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a96fa685b0a361f3103c6b0324eb48286">ABCSDEPLOYED</a>:</div>
<div class="line"><span class="lineno"> 1876</span>                    <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">phase</a> = 4;</div>
<div class="line"><span class="lineno"> 1877</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1878</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3aadd0dc8e4b9d8ac5e296a6dd14d9d7ba">DROGUE</a>:</div>
<div class="line"><span class="lineno"> 1879</span>                    <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">phase</a> = 5;</div>
<div class="line"><span class="lineno"> 1880</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1881</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a41c6eb506ccf657cc7e958c8e8c769cd">MAIN</a>:</div>
<div class="line"><span class="lineno"> 1882</span>                    <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">phase</a> = 6;</div>
<div class="line"><span class="lineno"> 1883</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1884</span>                <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3af333eb87dc386553d0043cf3af30a831">TOUCHDOWN</a>:</div>
<div class="line"><span class="lineno"> 1885</span>                    <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">phase</a> = 7;</div>
<div class="line"><span class="lineno"> 1886</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1887</span>        }</div>
<div class="line"><span class="lineno"> 1888</span>      <span class="comment">//------------------------------------------------------------------------------------------------- TODO given that magnetometers will not fly we will replace their data with other stuff</span></div>
<div class="line"><span class="lineno"> 1889</span>      <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#add1984ea7f2a2cfd784f10e0a769df54">mag_x</a> = (float_t)<a class="code hl_variable" href="main_8c.html#a20f4c4490bc8ecbdd1ffcb79acce6035">alpha</a>;</div>
<div class="line"><span class="lineno"> 1890</span> </div>
<div class="line"><span class="lineno"> 1891</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a>&gt; <a class="code hl_variable" href="main_8c.html#af5bcf806a3083d451b26820fd31070a0">max_alt</a>){</div>
<div class="line"><span class="lineno"> 1892</span>          <a class="code hl_variable" href="main_8c.html#af5bcf806a3083d451b26820fd31070a0">max_alt</a> =<a class="code hl_variable" href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a>;</div>
<div class="line"><span class="lineno"> 1893</span>          <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#a76b439e8238b82a1b6b1574a248454b2">mag_y</a> = <a class="code hl_variable" href="main_8c.html#af5bcf806a3083d451b26820fd31070a0">max_alt</a>;</div>
<div class="line"><span class="lineno"> 1894</span>      }</div>
<div class="line"><span class="lineno"> 1895</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="main_8c.html#ab0a3df7e43ce8ebff885530aaa663739">velocity</a>&gt; <a class="code hl_variable" href="main_8c.html#adbd931ab99ceeb93e8a9e869f5866a8e">max_vel</a>){</div>
<div class="line"><span class="lineno"> 1896</span>          <a class="code hl_variable" href="main_8c.html#adbd931ab99ceeb93e8a9e869f5866a8e">max_vel</a> =<a class="code hl_variable" href="main_8c.html#ab0a3df7e43ce8ebff885530aaa663739">velocity</a>;</div>
<div class="line"><span class="lineno"> 1897</span>          <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#a646143032e390a95c669b79363365135">mag_z</a> = <a class="code hl_variable" href="main_8c.html#adbd931ab99ceeb93e8a9e869f5866a8e">max_vel</a>;</div>
<div class="line"><span class="lineno"> 1898</span> </div>
<div class="line"><span class="lineno"> 1899</span>          }</div>
<div class="line"><span class="lineno"> 1900</span>        <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#aa03eabba7570d028b53905c657a7cc47">temperature</a> = <a class="code hl_variable" href="main_8c.html#ac638c2985c2de477e84a4b8d74da4649">barometer_data_1</a>.<a class="code hl_variable" href="structbmp3__data.html#afddb317411caf4941b1247ed2fe1691b">temperature</a>;</div>
<div class="line"><span class="lineno"> 1901</span>        <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#aab6e9a55d6028afb01d4a59cac3619cd">pressure</a> = <a class="code hl_variable" href="main_8c.html#ac638c2985c2de477e84a4b8d74da4649">barometer_data_1</a>.<a class="code hl_variable" href="structbmp3__data.html#ae12b796c80f6c1b6c72a5ff6782f4d84">pressure</a>;</div>
<div class="line"><span class="lineno"> 1902</span>        <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#a9811d347079c689cc72f5d7030447e49">altitude</a> =  <a class="code hl_variable" href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a>;</div>
<div class="line"><span class="lineno"> 1903</span>        <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#ae90546c68539c7236b0a24ff26923441">velocity</a> = <a class="code hl_variable" href="main_8c.html#ab0a3df7e43ce8ebff885530aaa663739">velocity</a>;</div>
<div class="line"><span class="lineno"> 1904</span>        <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#ab0d7791e19eccdc7312edaf2c07f320a">parachute_1</a> = <a class="code hl_variable" href="group___global___variables.html#ga9f6b9948886b71a18a636cce7acd5e52">drogue</a>;</div>
<div class="line"><span class="lineno"> 1905</span>        <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#a75e6d1ec8cd8cc74725391ae0fc26949">parachute_2</a> = <a class="code hl_variable" href="group___global___variables.html#gaf20e0da8d1d2d642fcd2c1b869394bcf">mainp</a>;</div>
<div class="line"><span class="lineno"> 1906</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="group___global___variables.html#ga3dd0ab7e3442a6c2767b63b3916f473f">flag_MPC</a> &amp;&amp; <a class="code hl_variable" href="main_8c.html#a2c247b36691d4fee60fe40bab779aa5f">flight_state</a>.<a class="code hl_variable" href="structflight__fsm__t.html#aa261111fbfd39bc2e3e292c60b467dda">flight_state</a>&lt;<a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3aadd0dc8e4b9d8ac5e296a6dd14d9d7ba">DROGUE</a>){</div>
<div class="line"><span class="lineno"> 1907</span> </div>
<div class="line"><span class="lineno"> 1908</span>            <span class="keywordtype">double</span> deg = <a class="code hl_function" href="optimal_angle_8c.html#aae2f8a89388a2bfd4292c2d78da13e3a">optimalAngle</a>( <a class="code hl_variable" href="main_8c.html#a6d73041c24f65bba028a4bbb2ce8dc39">sim_time_step</a>,</div>
<div class="line"><span class="lineno"> 1909</span>                                   <a class="code hl_variable" href="main_8c.html#aeb25ec73d62f86439923fd8f39fb1261">x_est</a>[0],<a class="code hl_variable" href="main_8c.html#ac638c2985c2de477e84a4b8d74da4649">barometer_data_1</a>.<a class="code hl_variable" href="structbmp3__data.html#afddb317411caf4941b1247ed2fe1691b">temperature</a>, <a class="code hl_variable" href="main_8c.html#aeb25ec73d62f86439923fd8f39fb1261">x_est</a>[1],</div>
<div class="line"><span class="lineno"> 1910</span>                                   <a class="code hl_variable" href="main_8c.html#ac638c2985c2de477e84a4b8d74da4649">barometer_data_1</a>.<a class="code hl_variable" href="structbmp3__data.html#ae12b796c80f6c1b6c72a5ff6782f4d84">pressure</a>,<a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#ae8b6a7b01ab643b0770f835831622453">deg</a>, <a class="code hl_variable" href="main_8c.html#a20f4c4490bc8ecbdd1ffcb79acce6035">alpha</a>, <a class="code hl_variable" href="main_8c.html#abde1b7f8a53a48ccd030fb861ae3b7ea">target_apogee</a>,</div>
<div class="line"><span class="lineno"> 1911</span>                                   <a class="code hl_variable" href="main_8c.html#a97eab6d709b80585fe9e8a54b1e3da27">tolerance</a>, <a class="code hl_variable" href="main_8c.html#a2af0b0f56789fc219dd24be2bea8bfc3">mach_states</a>,</div>
<div class="line"><span class="lineno"> 1912</span>                                   <a class="code hl_variable" href="main_8c.html#ac829aead4de71eb8bc9300bb0bdee08d">deployment_states</a>,</div>
<div class="line"><span class="lineno"> 1913</span>                                   <a class="code hl_variable" href="main_8c.html#af01cd17669a1da62f9632736af3e77f1">cd_table</a>);</div>
<div class="line"><span class="lineno"> 1914</span>          <span class="comment">//------------------------------------------------------------------------------------------------- TODO given that magnetometers will not fly we will replace their data with other stuff</span></div>
<div class="line"><span class="lineno"> 1915</span> </div>
<div class="line"><span class="lineno"> 1916</span>            <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#ae8b6a7b01ab643b0770f835831622453">deg</a> = (float_t)deg;</div>
<div class="line"><span class="lineno"> 1917</span> </div>
<div class="line"><span class="lineno"> 1918</span>        }<span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="main_8c.html#a2c247b36691d4fee60fe40bab779aa5f">flight_state</a>.<a class="code hl_variable" href="structflight__fsm__t.html#aa261111fbfd39bc2e3e292c60b467dda">flight_state</a>&gt;=<a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3aadd0dc8e4b9d8ac5e296a6dd14d9d7ba">DROGUE</a>){</div>
<div class="line"><span class="lineno"> 1919</span>            <a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>.<a class="code hl_variable" href="struct_data___package___for___marconi.html#ae8b6a7b01ab643b0770f835831622453">deg</a> = 60.0;</div>
<div class="line"><span class="lineno"> 1920</span>        }</div>
<div class="line"><span class="lineno"> 1921</span>        ++prescaler;</div>
<div class="line"><span class="lineno"> 1922</span>        <span class="keywordflow">if</span> (prescaler == 2)  <span class="comment">// 1 second</span></div>
<div class="line"><span class="lineno"> 1923</span>            {</div>
<div class="line"><span class="lineno"> 1924</span>                 prescaler = 0;</div>
<div class="line"><span class="lineno"> 1925</span>            <span class="comment">//        //toggle_led();</span></div>
<div class="line"><span class="lineno"> 1926</span>                 LED_TOGGLE(GPIO_LED3_GPIO_Port,GPIO_LED3_Pin);</div>
<div class="line"><span class="lineno"> 1927</span>            }</div>
<div class="line"><span class="lineno"> 1928</span>        memcpy(<a class="code hl_variable" href="main_8c.html#ace54632b92220adeabb7035db8fae830">array</a>,(uint8_t*)&amp;<a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>,<span class="keyword">sizeof</span>(<a class="code hl_variable" href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a>));</div>
<div class="line"><span class="lineno"> 1929</span>        HAL_UART_Transmit_DMA(&amp;<a class="code hl_variable" href="main_8c.html#a2cf715bef37f7e8ef385a30974a5f0d5">huart1</a>, <a class="code hl_variable" href="main_8c.html#ace54632b92220adeabb7035db8fae830">array</a>, <span class="keyword">sizeof</span>(<a class="code hl_variable" href="main_8c.html#ace54632b92220adeabb7035db8fae830">array</a>));</div>
<div class="line"><span class="lineno"> 1930</span> </div>
<div class="line"><span class="lineno"> 1931</span> </div>
<div class="line"><span class="lineno"> 1932</span>  }</div>
<div class="line"><span class="lineno"> 1933</span>  <span class="comment">/* USER CODE END StartMPC_Task */</span></div>
<div class="line"><span class="lineno"> 1934</span>}</div>
<div class="ttc" id="agroup___flight_state_html_gga3dfa0d2746ea8e8cbad6da7259918ab3a418c789b8bc517c5c1cf05dbfc5c45e0"><div class="ttname"><a href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a418c789b8bc517c5c1cf05dbfc5c45e0">CALIBRATING</a></div><div class="ttdeci">@ CALIBRATING</div><div class="ttdoc">On the launchpad, calibrating sensors.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00035">flight_control.h:35</a></div></div>
<div class="ttc" id="agroup___flight_state_html_gga3dfa0d2746ea8e8cbad6da7259918ab3a41c6eb506ccf657cc7e958c8e8c769cd"><div class="ttname"><a href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a41c6eb506ccf657cc7e958c8e8c769cd">MAIN</a></div><div class="ttdeci">@ MAIN</div><div class="ttdoc">Main parachute has been deployed.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00040">flight_control.h:40</a></div></div>
<div class="ttc" id="agroup___flight_state_html_gga3dfa0d2746ea8e8cbad6da7259918ab3a78cda93fcedb1dc8abd154cc187e6730"><div class="ttname"><a href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a78cda93fcedb1dc8abd154cc187e6730">LIFTOFF</a></div><div class="ttdeci">@ LIFTOFF</div><div class="ttdoc">Rocket has cleared the launch rail.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00036">flight_control.h:36</a></div></div>
<div class="ttc" id="agroup___flight_state_html_gga3dfa0d2746ea8e8cbad6da7259918ab3a96fa685b0a361f3103c6b0324eb48286"><div class="ttname"><a href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a96fa685b0a361f3103c6b0324eb48286">ABCSDEPLOYED</a></div><div class="ttdeci">@ ABCSDEPLOYED</div><div class="ttdoc">Airbrakes are deployed for apogee control.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00038">flight_control.h:38</a></div></div>
<div class="ttc" id="agroup___flight_state_html_gga3dfa0d2746ea8e8cbad6da7259918ab3aadd0dc8e4b9d8ac5e296a6dd14d9d7ba"><div class="ttname"><a href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3aadd0dc8e4b9d8ac5e296a6dd14d9d7ba">DROGUE</a></div><div class="ttdeci">@ DROGUE</div><div class="ttdoc">Drogue parachute has been deployed.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00039">flight_control.h:39</a></div></div>
<div class="ttc" id="agroup___flight_state_html_gga3dfa0d2746ea8e8cbad6da7259918ab3ad790b28b6f6640a2aeb099fdd740566b"><div class="ttname"><a href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3ad790b28b6f6640a2aeb099fdd740566b">BURNING</a></div><div class="ttdeci">@ BURNING</div><div class="ttdoc">Engine is burning; under powered ascent.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00037">flight_control.h:37</a></div></div>
<div class="ttc" id="agroup___flight_state_html_gga3dfa0d2746ea8e8cbad6da7259918ab3aef2863a469df3ea6871d640e3669a2f2"><div class="ttname"><a href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3aef2863a469df3ea6871d640e3669a2f2">INVALID</a></div><div class="ttdeci">@ INVALID</div><div class="ttdoc">An undefined or error state.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00034">flight_control.h:34</a></div></div>
<div class="ttc" id="agroup___flight_state_html_gga3dfa0d2746ea8e8cbad6da7259918ab3af333eb87dc386553d0043cf3af30a831"><div class="ttname"><a href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3af333eb87dc386553d0043cf3af30a831">TOUCHDOWN</a></div><div class="ttdeci">@ TOUCHDOWN</div><div class="ttdoc">Rocket has landed.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00041">flight_control.h:41</a></div></div>
<div class="ttc" id="agroup___global___variables_html_ga3dd0ab7e3442a6c2767b63b3916f473f"><div class="ttname"><a href="group___global___variables.html#ga3dd0ab7e3442a6c2767b63b3916f473f">flag_MPC</a></div><div class="ttdeci">bool flag_MPC</div><div class="ttdoc">RTOS event flag to trigger the MPC task.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00303">main.c:303</a></div></div>
<div class="ttc" id="agroup___global___variables_html_ga9f6b9948886b71a18a636cce7acd5e52"><div class="ttname"><a href="group___global___variables.html#ga9f6b9948886b71a18a636cce7acd5e52">drogue</a></div><div class="ttdeci">uint8_t drogue</div><div class="ttdoc">Status flag for the drogue parachute pyro channel.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00229">main.c:229</a></div></div>
<div class="ttc" id="agroup___global___variables_html_gaf20e0da8d1d2d642fcd2c1b869394bcf"><div class="ttname"><a href="group___global___variables.html#gaf20e0da8d1d2d642fcd2c1b869394bcf">mainp</a></div><div class="ttdeci">uint8_t mainp</div><div class="ttdoc">Status flag for the main parachute pyro channel.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00230">main.c:230</a></div></div>
<div class="ttc" id="amain_8c_html_a2af0b0f56789fc219dd24be2bea8bfc3"><div class="ttname"><a href="main_8c.html#a2af0b0f56789fc219dd24be2bea8bfc3">mach_states</a></div><div class="ttdeci">const double mach_states[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00261">main.c:261</a></div></div>
<div class="ttc" id="amain_8c_html_a2cf715bef37f7e8ef385a30974a5f0d5"><div class="ttname"><a href="main_8c.html#a2cf715bef37f7e8ef385a30974a5f0d5">huart1</a></div><div class="ttdeci">UART_HandleTypeDef huart1</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00072">main.c:72</a></div></div>
<div class="ttc" id="amain_8c_html_a34c3c4d1beb806ca38a7eb23b6d4f9fd"><div class="ttname"><a href="main_8c.html#a34c3c4d1beb806ca38a7eb23b6d4f9fd">MPC_FLAG</a></div><div class="ttdeci">#define MPC_FLAG</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00284">main.c:284</a></div></div>
<div class="ttc" id="amain_8c_html_a3b47c7a618e6b6e16efa4f1a261f14ca"><div class="ttname"><a href="main_8c.html#a3b47c7a618e6b6e16efa4f1a261f14ca">Vr</a></div><div class="ttdeci">float Vr</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00322">main.c:322</a></div></div>
<div class="ttc" id="amain_8c_html_a442bce6ed84da77e53fc00657fe0e649"><div class="ttname"><a href="main_8c.html#a442bce6ed84da77e53fc00657fe0e649">message</a></div><div class="ttdeci">Data_Package_For_Marconi message</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00228">main.c:228</a></div></div>
<div class="ttc" id="amain_8c_html_a6d73041c24f65bba028a4bbb2ce8dc39"><div class="ttname"><a href="main_8c.html#a6d73041c24f65bba028a4bbb2ce8dc39">sim_time_step</a></div><div class="ttdeci">double sim_time_step</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00256">main.c:256</a></div></div>
<div class="ttc" id="amain_8c_html_a923c93d247c3b501b51050b00a6cee43"><div class="ttname"><a href="main_8c.html#a923c93d247c3b501b51050b00a6cee43">Vin</a></div><div class="ttdeci">float Vin</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00321">main.c:321</a></div></div>
<div class="ttc" id="amain_8c_html_a97eab6d709b80585fe9e8a54b1e3da27"><div class="ttname"><a href="main_8c.html#a97eab6d709b80585fe9e8a54b1e3da27">tolerance</a></div><div class="ttdeci">double tolerance</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00259">main.c:259</a></div></div>
<div class="ttc" id="amain_8c_html_a984624bcf28d1b2fb7e4e18349f65d5c"><div class="ttname"><a href="main_8c.html#a984624bcf28d1b2fb7e4e18349f65d5c">hadc3</a></div><div class="ttdeci">ADC_HandleTypeDef hadc3</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00054">main.c:54</a></div></div>
<div class="ttc" id="amain_8c_html_ab56a2c476dbdb2957b4640ecfe044c15"><div class="ttname"><a href="main_8c.html#ab56a2c476dbdb2957b4640ecfe044c15">adcVal</a></div><div class="ttdeci">uint32_t adcVal</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00323">main.c:323</a></div></div>
<div class="ttc" id="amain_8c_html_abb71bf3ee68e2a051fbeec6c3ab3012d"><div class="ttname"><a href="main_8c.html#abb71bf3ee68e2a051fbeec6c3ab3012d">htim7</a></div><div class="ttdeci">TIM_HandleTypeDef htim7</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00067">main.c:67</a></div></div>
<div class="ttc" id="amain_8c_html_abde1b7f8a53a48ccd030fb861ae3b7ea"><div class="ttname"><a href="main_8c.html#abde1b7f8a53a48ccd030fb861ae3b7ea">target_apogee</a></div><div class="ttdeci">double target_apogee</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00258">main.c:258</a></div></div>
<div class="ttc" id="amain_8c_html_ac638c2985c2de477e84a4b8d74da4649"><div class="ttname"><a href="main_8c.html#ac638c2985c2de477e84a4b8d74da4649">barometer_data_1</a></div><div class="ttdeci">struct bmp3_data barometer_data_1</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00126">main.c:126</a></div></div>
<div class="ttc" id="amain_8c_html_ac7aaa42530f4af993e21da0798a5af95"><div class="ttname"><a href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a></div><div class="ttdeci">static float_t angular_rate_mdps_1[3]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00133">main.c:133</a></div></div>
<div class="ttc" id="amain_8c_html_ac829aead4de71eb8bc9300bb0bdee08d"><div class="ttname"><a href="main_8c.html#ac829aead4de71eb8bc9300bb0bdee08d">deployment_states</a></div><div class="ttdeci">const double deployment_states[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00262">main.c:262</a></div></div>
<div class="ttc" id="amain_8c_html_ace54632b92220adeabb7035db8fae830"><div class="ttname"><a href="main_8c.html#ace54632b92220adeabb7035db8fae830">array</a></div><div class="ttdeci">uint8_t array[63]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00296">main.c:296</a></div></div>
<div class="ttc" id="amain_8c_html_adbd931ab99ceeb93e8a9e869f5866a8e"><div class="ttname"><a href="main_8c.html#adbd931ab99ceeb93e8a9e869f5866a8e">max_vel</a></div><div class="ttdeci">float max_vel</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00232">main.c:232</a></div></div>
<div class="ttc" id="amain_8c_html_af01cd17669a1da62f9632736af3e77f1"><div class="ttname"><a href="main_8c.html#af01cd17669a1da62f9632736af3e77f1">cd_table</a></div><div class="ttdeci">static double cd_table[]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00263">main.c:263</a></div></div>
<div class="ttc" id="amain_8c_html_af5bcf806a3083d451b26820fd31070a0"><div class="ttname"><a href="main_8c.html#af5bcf806a3083d451b26820fd31070a0">max_alt</a></div><div class="ttdeci">float max_alt</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00231">main.c:231</a></div></div>
<div class="ttc" id="aoptimal_angle_8c_html_aae2f8a89388a2bfd4292c2d78da13e3a"><div class="ttname"><a href="optimal_angle_8c.html#aae2f8a89388a2bfd4292c2d78da13e3a">optimalAngle</a></div><div class="ttdeci">double optimalAngle(double sim_time_step, double altitude, double temperature, double velocity, double pressure, double current_delta, double tilt_angle, double target_apogee, double tolerance, const double mach_states[5], const double deployment_states[6], const double cd_table[30])</div><div class="ttdoc">Calculates the optimal constant airbrake angle to reach a target apogee.</div><div class="ttdef"><b>Definition</b> <a href="optimal_angle_8c_source.html#l00086">optimalAngle.c:86</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_a16bde7c189c07be95baf7f584b27c7ad"><div class="ttname"><a href="struct_data___package___for___marconi.html#a16bde7c189c07be95baf7f584b27c7ad">Data_Package_For_Marconi::acc_x</a></div><div class="ttdeci">float_t acc_x</div><div class="ttdoc">Acceleration along the X-axis in g's.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00195">main.c:195</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_a5c4d1fc0baea8eb1c46d0779351efd18"><div class="ttname"><a href="struct_data___package___for___marconi.html#a5c4d1fc0baea8eb1c46d0779351efd18">Data_Package_For_Marconi::acc_y</a></div><div class="ttdeci">float_t acc_y</div><div class="ttdoc">Acceleration along the Y-axis in g's.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00196">main.c:196</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_a60a8279e3f525cece1dc378bd73194bd"><div class="ttname"><a href="struct_data___package___for___marconi.html#a60a8279e3f525cece1dc378bd73194bd">Data_Package_For_Marconi::Battery_Voltage</a></div><div class="ttdeci">float_t Battery_Voltage</div><div class="ttdoc">Current battery voltage in Volts.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00214">main.c:214</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_a646143032e390a95c669b79363365135"><div class="ttname"><a href="struct_data___package___for___marconi.html#a646143032e390a95c669b79363365135">Data_Package_For_Marconi::mag_z</a></div><div class="ttdeci">float_t mag_z</div><div class="ttdoc">Magnetic field strength on the Z-axis in mG.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00205">main.c:205</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_a75e6d1ec8cd8cc74725391ae0fc26949"><div class="ttname"><a href="struct_data___package___for___marconi.html#a75e6d1ec8cd8cc74725391ae0fc26949">Data_Package_For_Marconi::parachute_2</a></div><div class="ttdeci">uint8_t parachute_2</div><div class="ttdoc">Status of the main parachute (e.g., 0=Armed, 1=Deployed).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00218">main.c:218</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_a76b439e8238b82a1b6b1574a248454b2"><div class="ttname"><a href="struct_data___package___for___marconi.html#a76b439e8238b82a1b6b1574a248454b2">Data_Package_For_Marconi::mag_y</a></div><div class="ttdeci">float_t mag_y</div><div class="ttdoc">Magnetic field strength on the Y-axis in mG.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00204">main.c:204</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_a9811d347079c689cc72f5d7030447e49"><div class="ttname"><a href="struct_data___package___for___marconi.html#a9811d347079c689cc72f5d7030447e49">Data_Package_For_Marconi::altitude</a></div><div class="ttdeci">float_t altitude</div><div class="ttdoc">Calculated altitude above sea level in meters (m).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00209">main.c:209</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_aa03eabba7570d028b53905c657a7cc47"><div class="ttname"><a href="struct_data___package___for___marconi.html#aa03eabba7570d028b53905c657a7cc47">Data_Package_For_Marconi::temperature</a></div><div class="ttdeci">float_t temperature</div><div class="ttdoc">Ambient temperature in degrees Celsius (C).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00207">main.c:207</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_aa453c71bf1235a95bbeaed059adfeb3b"><div class="ttname"><a href="struct_data___package___for___marconi.html#aa453c71bf1235a95bbeaed059adfeb3b">Data_Package_For_Marconi::acc_z</a></div><div class="ttdeci">float_t acc_z</div><div class="ttdoc">Acceleration along the Z-axis in g's.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00197">main.c:197</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_aa9e9a5f71f82e66193377ea18bc2f5e6"><div class="ttname"><a href="struct_data___package___for___marconi.html#aa9e9a5f71f82e66193377ea18bc2f5e6">Data_Package_For_Marconi::dps_y</a></div><div class="ttdeci">float_t dps_y</div><div class="ttdoc">Angular rate around the Y-axis in dps.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00200">main.c:200</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_aab6e9a55d6028afb01d4a59cac3619cd"><div class="ttname"><a href="struct_data___package___for___marconi.html#aab6e9a55d6028afb01d4a59cac3619cd">Data_Package_For_Marconi::pressure</a></div><div class="ttdeci">float_t pressure</div><div class="ttdoc">Atmospheric pressure in Pascals (Pa).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00208">main.c:208</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_ab0d7791e19eccdc7312edaf2c07f320a"><div class="ttname"><a href="struct_data___package___for___marconi.html#ab0d7791e19eccdc7312edaf2c07f320a">Data_Package_For_Marconi::parachute_1</a></div><div class="ttdeci">uint8_t parachute_1</div><div class="ttdoc">Status of the drogue parachute (e.g., 0=Armed, 1=Deployed).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00217">main.c:217</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_acdf805fe6e79eabc31788bb5f28525b5"><div class="ttname"><a href="struct_data___package___for___marconi.html#acdf805fe6e79eabc31788bb5f28525b5">Data_Package_For_Marconi::phase</a></div><div class="ttdeci">uint8_t phase</div><div class="ttdoc">Current flight phase identifier (e.g., 0=Calibration, 1=Liftoff).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00212">main.c:212</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_add1984ea7f2a2cfd784f10e0a769df54"><div class="ttname"><a href="struct_data___package___for___marconi.html#add1984ea7f2a2cfd784f10e0a769df54">Data_Package_For_Marconi::mag_x</a></div><div class="ttdeci">float_t mag_x</div><div class="ttdoc">Magnetic field strength on the X-axis in mG (milligauss).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00203">main.c:203</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_ae8b6a7b01ab643b0770f835831622453"><div class="ttname"><a href="struct_data___package___for___marconi.html#ae8b6a7b01ab643b0770f835831622453">Data_Package_For_Marconi::deg</a></div><div class="ttdeci">float_t deg</div><div class="ttdoc">Current airbrakes opening degrees.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00215">main.c:215</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_ae90546c68539c7236b0a24ff26923441"><div class="ttname"><a href="struct_data___package___for___marconi.html#ae90546c68539c7236b0a24ff26923441">Data_Package_For_Marconi::velocity</a></div><div class="ttdeci">float_t velocity</div><div class="ttdoc">Calculated module of velocity in meters per second (m/s).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00211">main.c:211</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_af3b104f1ebc8f629c3f99c21fc738f23"><div class="ttname"><a href="struct_data___package___for___marconi.html#af3b104f1ebc8f629c3f99c21fc738f23">Data_Package_For_Marconi::dps_z</a></div><div class="ttdeci">float_t dps_z</div><div class="ttdoc">Angular rate around the Z-axis in dps.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00201">main.c:201</a></div></div>
<div class="ttc" id="astruct_data___package___for___marconi_html_af4d0dfe8acaf4df00444b9d0abda2993"><div class="ttname"><a href="struct_data___package___for___marconi.html#af4d0dfe8acaf4df00444b9d0abda2993">Data_Package_For_Marconi::dps_x</a></div><div class="ttdeci">float_t dps_x</div><div class="ttdoc">Angular rate around the X-axis in degrees per second (dps).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00199">main.c:199</a></div></div>
<div class="ttc" id="astructbmp3__data_html_ae12b796c80f6c1b6c72a5ff6782f4d84"><div class="ttname"><a href="structbmp3__data.html#ae12b796c80f6c1b6c72a5ff6782f4d84">bmp3_data::pressure</a></div><div class="ttdeci">double pressure</div><div class="ttdef"><b>Definition</b> <a href="bmp3__defs_8h_source.html#l00847">bmp3_defs.h:847</a></div></div>
<div class="ttc" id="astructbmp3__data_html_afddb317411caf4941b1247ed2fe1691b"><div class="ttname"><a href="structbmp3__data.html#afddb317411caf4941b1247ed2fe1691b">bmp3_data::temperature</a></div><div class="ttdeci">double temperature</div><div class="ttdef"><b>Definition</b> <a href="bmp3__defs_8h_source.html#l00844">bmp3_defs.h:844</a></div></div>
<div class="ttc" id="astructflight__fsm__t_html_aa261111fbfd39bc2e3e292c60b467dda"><div class="ttname"><a href="structflight__fsm__t.html#aa261111fbfd39bc2e3e292c60b467dda">flight_fsm_t::flight_state</a></div><div class="ttdeci">flight_phase_t flight_state</div><div class="ttdoc">The current state of the FSM.</div><div class="ttdef"><b>Definition</b> <a href="flight__control_8h_source.html#l00071">flight_control.h:71</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="flight__control_8h_source.html#l00038">ABCSDEPLOYED</a>, <a class="el" href="main_8c_source.html#l00195">Data_Package_For_Marconi::acc_x</a>, <a class="el" href="main_8c_source.html#l00196">Data_Package_For_Marconi::acc_y</a>, <a class="el" href="main_8c_source.html#l00197">Data_Package_For_Marconi::acc_z</a>, <a class="el" href="main_8c_source.html#l00132">acceleration_mg_1</a>, <a class="el" href="main_8c_source.html#l00323">adcVal</a>, <a class="el" href="main_8c_source.html#l00249">alpha</a>, <a class="el" href="main_8c_source.html#l00209">Data_Package_For_Marconi::altitude</a>, <a class="el" href="main_8c_source.html#l00224">altitude</a>, <a class="el" href="main_8c_source.html#l00133">angular_rate_mdps_1</a>, <a class="el" href="main_8c_source.html#l00296">array</a>, <a class="el" href="main_8c_source.html#l00126">barometer_data_1</a>, <a class="el" href="main_8c_source.html#l00214">Data_Package_For_Marconi::Battery_Voltage</a>, <a class="el" href="flight__control_8h_source.html#l00037">BURNING</a>, <a class="el" href="flight__control_8h_source.html#l00035">CALIBRATING</a>, <a class="el" href="main_8c_source.html#l00263">cd_table</a>, <a class="el" href="main_8c_source.html#l00215">Data_Package_For_Marconi::deg</a>, <a class="el" href="main_8c_source.html#l00262">deployment_states</a>, <a class="el" href="main_8c_source.html#l00199">Data_Package_For_Marconi::dps_x</a>, <a class="el" href="main_8c_source.html#l00200">Data_Package_For_Marconi::dps_y</a>, <a class="el" href="main_8c_source.html#l00201">Data_Package_For_Marconi::dps_z</a>, <a class="el" href="flight__control_8h_source.html#l00039">DROGUE</a>, <a class="el" href="main_8c_source.html#l00229">drogue</a>, <a class="el" href="main_8c_source.html#l00303">flag_MPC</a>, <a class="el" href="flight__control_8h_source.html#l00071">flight_fsm_t::flight_state</a>, <a class="el" href="main_8c_source.html#l00117">flight_state</a>, <a class="el" href="main_8c_source.html#l00054">hadc3</a>, <a class="el" href="main_8c_source.html#l00067">htim7</a>, <a class="el" href="main_8c_source.html#l00072">huart1</a>, <a class="el" href="flight__control_8h_source.html#l00034">INVALID</a>, <a class="el" href="flight__control_8h_source.html#l00036">LIFTOFF</a>, <a class="el" href="main_8c_source.html#l00261">mach_states</a>, <a class="el" href="main_8c_source.html#l00203">Data_Package_For_Marconi::mag_x</a>, <a class="el" href="main_8c_source.html#l00204">Data_Package_For_Marconi::mag_y</a>, <a class="el" href="main_8c_source.html#l00205">Data_Package_For_Marconi::mag_z</a>, <a class="el" href="flight__control_8h_source.html#l00040">MAIN</a>, <a class="el" href="main_8c_source.html#l00230">mainp</a>, <a class="el" href="main_8c_source.html#l00231">max_alt</a>, <a class="el" href="main_8c_source.html#l00232">max_vel</a>, <a class="el" href="main_8c_source.html#l00228">message</a>, <a class="el" href="main_8c_source.html#l00284">MPC_FLAG</a>, <a class="el" href="optimal_angle_8c_source.html#l00086">optimalAngle()</a>, <a class="el" href="main_8c_source.html#l00217">Data_Package_For_Marconi::parachute_1</a>, <a class="el" href="main_8c_source.html#l00218">Data_Package_For_Marconi::parachute_2</a>, <a class="el" href="main_8c_source.html#l00212">Data_Package_For_Marconi::phase</a>, <a class="el" href="bmp3__defs_8h_source.html#l00847">bmp3_data::pressure</a>, <a class="el" href="main_8c_source.html#l00208">Data_Package_For_Marconi::pressure</a>, <a class="el" href="main_8c_source.html#l00256">sim_time_step</a>, <a class="el" href="main_8c_source.html#l00258">target_apogee</a>, <a class="el" href="bmp3__defs_8h_source.html#l00844">bmp3_data::temperature</a>, <a class="el" href="main_8c_source.html#l00207">Data_Package_For_Marconi::temperature</a>, <a class="el" href="main_8c_source.html#l00259">tolerance</a>, <a class="el" href="flight__control_8h_source.html#l00041">TOUCHDOWN</a>, <a class="el" href="main_8c_source.html#l00211">Data_Package_For_Marconi::velocity</a>, <a class="el" href="main_8c_source.html#l00225">velocity</a>, <a class="el" href="main_8c_source.html#l00321">Vin</a>, <a class="el" href="main_8c_source.html#l00322">Vr</a>, and <a class="el" href="main_8c_source.html#l00254">x_est</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00399">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks_ga66e1e49e54f627fbc12b6f818505c70c_cgraph.png" border="0" usemap="#agroup___r_t_o_s___tasks_ga66e1e49e54f627fbc12b6f818505c70c_cgraph" alt=""/></div>
<map name="agroup___r_t_o_s___tasks_ga66e1e49e54f627fbc12b6f818505c70c_cgraph" id="agroup___r_t_o_s___tasks_ga66e1e49e54f627fbc12b6f818505c70c_cgraph">
<area shape="rect" title="Function implementing the MPC_Task thread." alt="" coords="5,259,120,285"/>
<area shape="rect" href="optimal_angle_8c.html#aae2f8a89388a2bfd4292c2d78da13e3a" title="Calculates the optimal constant airbrake angle to reach a target apogee." alt="" coords="168,259,264,285"/>
<area shape="poly" title=" " alt="" coords="120,269,152,269,152,275,120,275"/>
<area shape="rect" href="cd_evaluation_8c.html#a69f7fd2df34d5dbea75a4f8e560dd51f" title="Estimates the coefficient of drag (Cd) via 2D bilinear interpolation." alt="" coords="312,132,408,159"/>
<area shape="poly" title=" " alt="" coords="231,256,330,167,334,171,234,260"/>
<area shape="rect" href="optimal_angle_8c.html#aec012aeba63ea4ffcdc8bcede27b6847" title=" " alt="" coords="314,259,406,285"/>
<area shape="poly" title=" " alt="" coords="264,269,299,269,299,275,264,275"/>
<area shape="rect" href="group___non_finite___functions.html#ga77a37b8e06f4c4ce363a03fe4099aad8" title="Checks if a double&#45;precision value is Not&#45;a&#45;Number (NaN)." alt="" coords="486,309,553,336"/>
<area shape="poly" title=" " alt="" coords="265,283,313,295,396,308,471,316,470,321,395,313,311,300,264,289"/>
<area shape="rect" href="find_8c.html#a7b5c2b3712db27eb37ff2480cb06e58e" title="Finds the index of the last true element in a 5&#45;element boolean array." alt="" coords="477,5,562,32"/>
<area shape="poly" title=" " alt="" coords="369,130,404,87,428,63,455,42,462,37,465,42,458,46,432,67,408,91,373,133"/>
<area shape="rect" href="eml__mtimes__helper_8c.html#a6dfa07980827284784a4e944d9f12a0b" title="Performs a fused set of element&#45;wise operations for 2D interpolation." alt="" coords="456,56,583,83"/>
<area shape="poly" title=" " alt="" coords="384,129,455,92,467,87,470,92,458,97,387,134"/>
<area shape="rect" href="find_8c.html#aa6e9d8d524731c81277ed384b0771f2c" title="Finds the index of the last true element in a 6&#45;element boolean array." alt="" coords="484,107,555,133"/>
<area shape="poly" title=" " alt="" coords="409,135,469,125,470,131,409,140"/>
<area shape="rect" href="mrdivide__helper_8c.html#aa64ae8bd98fefc483183622c330cc62c" title="Performs element&#45;wise division of a scalar by each element of a matrix." alt="" coords="486,157,553,184"/>
<area shape="poly" title=" " alt="" coords="409,150,471,160,470,166,409,156"/>
<area shape="rect" href="mtimes_8c.html#a23754b43ebfe5c68d2918ea22a418718" title="Performs matrix multiplication: C = A * B." alt="" coords="487,208,552,235"/>
<area shape="poly" title=" " alt="" coords="387,157,457,194,474,201,472,206,455,198,384,162"/>
<area shape="rect" href="group___non_finite___functions.html#ga5cb8bd309556e80b24b7e67a0718a0c5" title="Checks if a double&#45;precision value is positive or negative infinity." alt="" coords="492,259,547,285"/>
<area shape="poly" title=" " alt="" coords="407,269,476,269,476,275,407,275"/>
<area shape="poly" title=" " alt="" coords="406,283,472,305,470,310,404,289"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks_ga66e1e49e54f627fbc12b6f818505c70c_icgraph.png" border="0" usemap="#agroup___r_t_o_s___tasks_ga66e1e49e54f627fbc12b6f818505c70c_icgraph" alt=""/></div>
<map name="agroup___r_t_o_s___tasks_ga66e1e49e54f627fbc12b6f818505c70c_icgraph" id="agroup___r_t_o_s___tasks_ga66e1e49e54f627fbc12b6f818505c70c_icgraph">
<area shape="rect" title="Function implementing the MPC_Task thread." alt="" coords="103,5,217,32"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
<a id="ga3271a69550bc5f9966c76521e5823891" name="ga3271a69550bc5f9966c76521e5823891"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3271a69550bc5f9966c76521e5823891">&#9670;&#160;</a></span>StartSensor_Task()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StartSensor_Task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argument</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function implementing the Sensor_Task thread. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argument</td><td>Not used </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">None</td><td></td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="main_8c_source.html#l01588">1588</a> of file <a class="el" href="main_8c_source.html">main.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1589</span>{</div>
<div class="line"><span class="lineno"> 1590</span>  <span class="comment">/* USER CODE BEGIN 5 */</span></div>
<div class="line"><span class="lineno"> 1591</span>    <span class="comment">//xSensorsTaskHandle = xTaskGetCurrentTaskHandle();</span></div>
<div class="line"><span class="lineno"> 1592</span>    <span class="comment">//static uint32_t prescaler = 0;</span></div>
<div class="line"><span class="lineno"> 1593</span>    uint32_t num_esecuzioni = 0;</div>
<div class="line"><span class="lineno"> 1594</span>    <a class="code hl_struct" href="struct_data___package__no___linear___i_m_u.html">Data_Package_no_Linear_IMU</a> the_rest = {0};</div>
<div class="line"><span class="lineno"> 1595</span>    osDelay(50);</div>
<div class="line"><span class="lineno"> 1596</span>    HAL_TIM_Base_Start_IT(&amp;<a class="code hl_variable" href="main_8c.html#a1564492831a79fa18466467c3420c3c3">htim6</a>);</div>
<div class="line"><span class="lineno"> 1597</span> </div>
<div class="line"><span class="lineno"> 1598</span>  <span class="comment">/* Infinite loop */</span></div>
<div class="line"><span class="lineno"> 1599</span>  <span class="keywordflow">for</span>(;;)</div>
<div class="line"><span class="lineno"> 1600</span>  {</div>
<div class="line"><span class="lineno"> 1601</span>      <span class="comment">//-----------------------------------------------------------------------------------every 0.25 ms</span></div>
<div class="line"><span class="lineno"> 1602</span>      osThreadFlagsWait(<a class="code hl_define" href="main_8c.html#a3a9e04f366240b4e25167160583ae165">SENSOR_FLAG</a>, osFlagsWaitAny, osWaitForever);</div>
<div class="line"><span class="lineno"> 1603</span> </div>
<div class="line"><span class="lineno"> 1604</span> </div>
<div class="line"><span class="lineno"> 1605</span>      <a class="code hl_function" href="group___l_s_m6_d_s_o32___data__output.html#gae8dc13475f3f44471dc2b3ffa5ccb4fd">lsm6dso32_acceleration_raw_get</a>(&amp;<a class="code hl_variable" href="main_8c.html#aaacbe7c48b34fa1fc39f740c7c233701">imu_1</a>, <a class="code hl_variable" href="main_8c.html#a4b69a1ec4b3b8c106bdf1dbb75b9f66e">data_raw_acceleration_1</a>);</div>
<div class="line"><span class="lineno"> 1606</span> </div>
<div class="line"><span class="lineno"> 1607</span>      <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[0] = <a class="code hl_function" href="group___l_s_m6_d_s_o32___sensitivity.html#gaccac5dfa532bb24e56084c864848866f">lsm6dso32_from_fs16_to_mg</a>(<a class="code hl_variable" href="main_8c.html#a4b69a1ec4b3b8c106bdf1dbb75b9f66e">data_raw_acceleration_1</a>[0]);</div>
<div class="line"><span class="lineno"> 1608</span>      <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[1] = <a class="code hl_function" href="group___l_s_m6_d_s_o32___sensitivity.html#gaccac5dfa532bb24e56084c864848866f">lsm6dso32_from_fs16_to_mg</a>(<a class="code hl_variable" href="main_8c.html#a4b69a1ec4b3b8c106bdf1dbb75b9f66e">data_raw_acceleration_1</a>[1]);</div>
<div class="line"><span class="lineno"> 1609</span>      <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[2] = <a class="code hl_function" href="group___l_s_m6_d_s_o32___sensitivity.html#gaccac5dfa532bb24e56084c864848866f">lsm6dso32_from_fs16_to_mg</a>(<a class="code hl_variable" href="main_8c.html#a4b69a1ec4b3b8c106bdf1dbb75b9f66e">data_raw_acceleration_1</a>[2]);</div>
<div class="line"><span class="lineno"> 1610</span> </div>
<div class="line"><span class="lineno"> 1611</span> </div>
<div class="line"><span class="lineno"> 1612</span>      <span class="comment">//Lettura IMU</span></div>
<div class="line"><span class="lineno"> 1613</span>      num_esecuzioni +=1;</div>
<div class="line"><span class="lineno"> 1614</span>      num_esecuzioni %= (uint32_t)40;</div>
<div class="line"><span class="lineno"> 1615</span>      <span class="keywordflow">if</span>(<a class="code hl_variable" href="group___global___variables.html#ga9944ecd09a3da3fa55c8c1846ba56f6d">flag_flash</a>){</div>
<div class="line"><span class="lineno"> 1616</span>          memcpy(<a class="code hl_variable" href="main_8c.html#a6c573dc02bda30a466ca6f4f446ccd23">data_buffer</a> + <a class="code hl_variable" href="main_8c.html#a407193f00ab88cb7ad11c975c076b279">num_of_lin_acc_saved</a>*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_linear___i_m_u___package.html">Linear_IMU_Package</a>) + <a class="code hl_variable" href="main_8c.html#ae28a866e269dd01ff1debbab1ffa5140">num_of_saved_rest_packages</a>*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_data___package__no___linear___i_m_u.html">Data_Package_no_Linear_IMU</a>),(uint8_t*) <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>,<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_linear___i_m_u___package.html">Linear_IMU_Package</a>));</div>
<div class="line"><span class="lineno"> 1617</span>          <a class="code hl_variable" href="main_8c.html#a407193f00ab88cb7ad11c975c076b279">num_of_lin_acc_saved</a>+=1;</div>
<div class="line"><span class="lineno"> 1618</span>      }</div>
<div class="line"><span class="lineno"> 1619</span> </div>
<div class="line"><span class="lineno"> 1620</span>      <span class="keywordflow">if</span> (num_esecuzioni == 0){</div>
<div class="line"><span class="lineno"> 1621</span> </div>
<div class="line"><span class="lineno"> 1622</span>          <a class="code hl_function" href="group___l_s_m6_d_s_o32___data__output.html#ga07e215fa4bc8336ae979b86811b148ba">lsm6dso32_angular_rate_raw_get</a>(&amp;<a class="code hl_variable" href="main_8c.html#aaacbe7c48b34fa1fc39f740c7c233701">imu_1</a>, <a class="code hl_variable" href="main_8c.html#ae521dc63b26dc48165784a1df0e198cb">data_raw_angular_rate_1</a>);</div>
<div class="line"><span class="lineno"> 1623</span> </div>
<div class="line"><span class="lineno"> 1624</span>          <a class="code hl_function" href="bmp3_8c.html#a8b7c253abd6cd44aa260578a10395697">bmp3_get_sensor_data</a>(<a class="code hl_define" href="bmp3__defs_8h.html#ab6b9e27977a4f9b87357e65c88a045b4">BMP3_PRESS_TEMP</a>, &amp;<a class="code hl_variable" href="main_8c.html#ac638c2985c2de477e84a4b8d74da4649">barometer_data_1</a>, &amp;<a class="code hl_variable" href="main_8c.html#a0cf7701595d4e09887c6fbecf62b4358">bmp390_1</a>);</div>
<div class="line"><span class="lineno"> 1625</span> </div>
<div class="line"><span class="lineno"> 1626</span>          <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[0] = <a class="code hl_function" href="group___l_s_m6_d_s_o32___sensitivity.html#gae57bfb3a87aed6927df02f9243ba2e42">lsm6dso32_from_fs2000_to_mdps</a>(<a class="code hl_variable" href="main_8c.html#ae521dc63b26dc48165784a1df0e198cb">data_raw_angular_rate_1</a>[0]);</div>
<div class="line"><span class="lineno"> 1627</span>          <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[1] = <a class="code hl_function" href="group___l_s_m6_d_s_o32___sensitivity.html#gae57bfb3a87aed6927df02f9243ba2e42">lsm6dso32_from_fs2000_to_mdps</a>(<a class="code hl_variable" href="main_8c.html#ae521dc63b26dc48165784a1df0e198cb">data_raw_angular_rate_1</a>[1]);</div>
<div class="line"><span class="lineno"> 1628</span>          <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[2] = <a class="code hl_function" href="group___l_s_m6_d_s_o32___sensitivity.html#gae57bfb3a87aed6927df02f9243ba2e42">lsm6dso32_from_fs2000_to_mdps</a>(<a class="code hl_variable" href="main_8c.html#ae521dc63b26dc48165784a1df0e198cb">data_raw_angular_rate_1</a>[2]);</div>
<div class="line"><span class="lineno"> 1629</span> </div>
<div class="line"><span class="lineno"> 1630</span>          the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#a33bdb898b864b670498f8039a12be835">dps_x</a> = <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[0];</div>
<div class="line"><span class="lineno"> 1631</span>          the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#a7cadde8fcb2454af24efb4b2607d835e">dps_y</a> = <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[1];</div>
<div class="line"><span class="lineno"> 1632</span>          the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#aaf985a5bd9827ae4ea9ace6052b6e053">dps_z</a> = <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[2];</div>
<div class="line"><span class="lineno"> 1633</span>          the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ab310883b8de615287d3705231282dc69">temperature</a> = <a class="code hl_variable" href="main_8c.html#ac638c2985c2de477e84a4b8d74da4649">barometer_data_1</a>.<a class="code hl_variable" href="structbmp3__data.html#afddb317411caf4941b1247ed2fe1691b">temperature</a>;</div>
<div class="line"><span class="lineno"> 1634</span>          the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#a780a2bebd8f276883f1f392bbdc30c0d">pressure</a> = <a class="code hl_variable" href="main_8c.html#ac638c2985c2de477e84a4b8d74da4649">barometer_data_1</a>.<a class="code hl_variable" href="structbmp3__data.html#ae12b796c80f6c1b6c72a5ff6782f4d84">pressure</a>;</div>
<div class="line"><span class="lineno"> 1635</span> </div>
<div class="line"><span class="lineno"> 1636</span> </div>
<div class="line"><span class="lineno"> 1637</span>          <span class="keywordflow">if</span>(<a class="code hl_variable" href="main_8c.html#a18ec5937d9fba09d3004f1bc1d1703a7">first_measure</a> ){</div>
<div class="line"><span class="lineno"> 1638</span>                <a class="code hl_variable" href="main_8c.html#a5d03058d1155cc25fdb0d3c21465311e">Pressure_1</a> = the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#a780a2bebd8f276883f1f392bbdc30c0d">pressure</a>;</div>
<div class="line"><span class="lineno"> 1639</span>                <a class="code hl_variable" href="main_8c.html#a04d1b3a7e1ad0adeaef1258c70cc4524">Temperature_1</a> = the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ab310883b8de615287d3705231282dc69">temperature</a>;</div>
<div class="line"><span class="lineno"> 1640</span>                <a class="code hl_variable" href="main_8c.html#a18ec5937d9fba09d3004f1bc1d1703a7">first_measure</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1641</span>          }</div>
<div class="line"><span class="lineno"> 1642</span>        <a class="code hl_variable" href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a> = <a class="code hl_function" href="utilities_8c.html#a0d6ca98078136ccb4f8805fbdbc9d0a4">readAltitude</a>(<a class="code hl_variable" href="main_8c.html#a5d03058d1155cc25fdb0d3c21465311e">Pressure_1</a>,<a class="code hl_variable" href="main_8c.html#a04d1b3a7e1ad0adeaef1258c70cc4524">Temperature_1</a>,the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#a780a2bebd8f276883f1f392bbdc30c0d">pressure</a>);</div>
<div class="line"><span class="lineno"> 1643</span>        <a class="code hl_variable" href="main_8c.html#ad1148f8e4558391676a82f3dcc0165ff">z</a>[0] = (double)<a class="code hl_variable" href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a>;</div>
<div class="line"><span class="lineno"> 1644</span>        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#a1a2fafd0d26e5f2110bf602301f0d269">altitude</a> = <a class="code hl_variable" href="main_8c.html#a3516728342a262892154a029df3625e2">altitude</a>;</div>
<div class="line"><span class="lineno"> 1645</span>        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#acf2533947d57c772b6d17b14c596a48e">velocity</a>=<a class="code hl_variable" href="main_8c.html#ab0a3df7e43ce8ebff885530aaa663739">velocity</a>;</div>
<div class="line"><span class="lineno"> 1646</span>         <a class="code hl_variable" href="main_8c.html#ad1148f8e4558391676a82f3dcc0165ff">z</a>[1] = (double)<a class="code hl_variable" href="main_8c.html#ab89cebf5103a1392207f4384554b1775">gps_vel</a>;</div>
<div class="line"><span class="lineno"> 1647</span> </div>
<div class="line"><span class="lineno"> 1648</span>        <span class="keywordflow">switch</span> (<a class="code hl_variable" href="main_8c.html#a2c247b36691d4fee60fe40bab779aa5f">flight_state</a>.<a class="code hl_variable" href="structflight__fsm__t.html#aa261111fbfd39bc2e3e292c60b467dda">flight_state</a>){</div>
<div class="line"><span class="lineno"> 1649</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3aef2863a469df3ea6871d640e3669a2f2">INVALID</a>:</div>
<div class="line"><span class="lineno"> 1650</span>                        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">phase</a> = 0;</div>
<div class="line"><span class="lineno"> 1651</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1652</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a418c789b8bc517c5c1cf05dbfc5c45e0">CALIBRATING</a>:</div>
<div class="line"><span class="lineno"> 1653</span>                        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">phase</a> = 1;</div>
<div class="line"><span class="lineno"> 1654</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1655</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a78cda93fcedb1dc8abd154cc187e6730">LIFTOFF</a>:</div>
<div class="line"><span class="lineno"> 1656</span>                        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">phase</a> = 2;</div>
<div class="line"><span class="lineno"> 1657</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1658</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3ad790b28b6f6640a2aeb099fdd740566b">BURNING</a>:</div>
<div class="line"><span class="lineno"> 1659</span>                        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">phase</a> = 3;</div>
<div class="line"><span class="lineno"> 1660</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1661</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a96fa685b0a361f3103c6b0324eb48286">ABCSDEPLOYED</a>:</div>
<div class="line"><span class="lineno"> 1662</span>                        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">phase</a> = 4;</div>
<div class="line"><span class="lineno"> 1663</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1664</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3aadd0dc8e4b9d8ac5e296a6dd14d9d7ba">DROGUE</a>:</div>
<div class="line"><span class="lineno"> 1665</span>                        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">phase</a> = 5;</div>
<div class="line"><span class="lineno"> 1666</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1667</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3a41c6eb506ccf657cc7e958c8e8c769cd">MAIN</a>:</div>
<div class="line"><span class="lineno"> 1668</span>                        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">phase</a> = 6;</div>
<div class="line"><span class="lineno"> 1669</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1670</span>                    <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="group___flight_state.html#gga3dfa0d2746ea8e8cbad6da7259918ab3af333eb87dc386553d0043cf3af30a831">TOUCHDOWN</a>:</div>
<div class="line"><span class="lineno"> 1671</span>                        the_rest.<a class="code hl_variable" href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">phase</a> = 7;</div>
<div class="line"><span class="lineno"> 1672</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1673</span>                }</div>
<div class="line"><span class="lineno"> 1674</span>        <span class="keywordflow">if</span>(<a class="code hl_variable" href="group___global___variables.html#ga9944ecd09a3da3fa55c8c1846ba56f6d">flag_flash</a>){</div>
<div class="line"><span class="lineno"> 1675</span>            memcpy(<a class="code hl_variable" href="main_8c.html#a6c573dc02bda30a466ca6f4f446ccd23">data_buffer</a> + <a class="code hl_variable" href="main_8c.html#a407193f00ab88cb7ad11c975c076b279">num_of_lin_acc_saved</a>*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_linear___i_m_u___package.html">Linear_IMU_Package</a>)+<a class="code hl_variable" href="main_8c.html#ae28a866e269dd01ff1debbab1ffa5140">num_of_saved_rest_packages</a>*<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_data___package__no___linear___i_m_u.html">Data_Package_no_Linear_IMU</a>),(uint8_t*)&amp; the_rest,<span class="keyword">sizeof</span>(<a class="code hl_struct" href="struct_data___package__no___linear___i_m_u.html">Data_Package_no_Linear_IMU</a>));</div>
<div class="line"><span class="lineno"> 1676</span>            <a class="code hl_variable" href="main_8c.html#ae28a866e269dd01ff1debbab1ffa5140">num_of_saved_rest_packages</a> +=1;</div>
<div class="line"><span class="lineno"> 1677</span>            <span class="comment">//-------------------------------------------------------- We enter this portion of code every 10 ms</span></div>
<div class="line"><span class="lineno"> 1678</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="main_8c.html#ae28a866e269dd01ff1debbab1ffa5140">num_of_saved_rest_packages</a> == 8) {</div>
<div class="line"><span class="lineno"> 1679</span>                <a class="code hl_variable" href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a> = 8;</div>
<div class="line"><span class="lineno"> 1680</span>                <a class="code hl_variable" href="main_8c.html#a407193f00ab88cb7ad11c975c076b279">num_of_lin_acc_saved</a> = 0;</div>
<div class="line"><span class="lineno"> 1681</span>                <a class="code hl_variable" href="main_8c.html#ae28a866e269dd01ff1debbab1ffa5140">num_of_saved_rest_packages</a> = 0;</div>
<div class="line"><span class="lineno"> 1682</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="main_8c.html#ae28a866e269dd01ff1debbab1ffa5140">num_of_saved_rest_packages</a> == 4) {</div>
<div class="line"><span class="lineno"> 1683</span>                <a class="code hl_variable" href="main_8c.html#ae389ef02c92670e5f124bb3549341593">num_of_saved_rest_packages_locked</a> = 4;</div>
<div class="line"><span class="lineno"> 1684</span>            }</div>
<div class="line"><span class="lineno"> 1685</span>        }</div>
<div class="line"><span class="lineno"> 1686</span>        <a class="code hl_variable" href="main_8c.html#a454c0957f2c571d20c930b99a933d3fe">a_m</a> = <a class="code hl_variable" href="main_8c.html#a1832f94702f253abf0aecda476d87d6e">acceleration_mg_1</a>[0];</div>
<div class="line"><span class="lineno"> 1687</span>        <a class="code hl_variable" href="main_8c.html#a6f4cfa41c70f50ef4b5700aef52e6799">omega</a>[0] = -<a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[2]*M_PI/180000;</div>
<div class="line"><span class="lineno"> 1688</span>        <a class="code hl_variable" href="main_8c.html#a6f4cfa41c70f50ef4b5700aef52e6799">omega</a>[1] = <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[1]*M_PI/180000;</div>
<div class="line"><span class="lineno"> 1689</span>        <a class="code hl_variable" href="main_8c.html#a6f4cfa41c70f50ef4b5700aef52e6799">omega</a>[2] = <a class="code hl_variable" href="main_8c.html#ac7aaa42530f4af993e21da0798a5af95">angular_rate_mdps_1</a>[0]*M_PI/180000;</div>
<div class="line"><span class="lineno"> 1690</span> </div>
<div class="line"><span class="lineno"> 1691</span>        <span class="comment">//++prescaler;</span></div>
<div class="line"><span class="lineno"> 1692</span>                  <span class="comment">//if (prescaler == 100)  // 1 second</span></div>
<div class="line"><span class="lineno"> 1693</span>                <span class="comment">//  {</span></div>
<div class="line"><span class="lineno"> 1694</span>              <span class="comment">//      prescaler = 0;</span></div>
<div class="line"><span class="lineno"> 1695</span>            <span class="comment">//        //toggle_led();</span></div>
<div class="line"><span class="lineno"> 1696</span>          <span class="comment">//          LED_TOGGLE(GPIO_LED1_GPIO_Port,GPIO_LED1_Pin);</span></div>
<div class="line"><span class="lineno"> 1697</span>        <span class="comment">//}</span></div>
<div class="line"><span class="lineno"> 1698</span> </div>
<div class="line"><span class="lineno"> 1699</span>        osThreadFlagsSet(<a class="code hl_variable" href="main_8c.html#ab3d16c9bfe2d2ad97914e702712b5f27">Kalman_mkfHandle</a>, <a class="code hl_define" href="main_8c.html#aa38bc52990f2c6d377b3c6a36e211536">KALMAN_FLAG</a>);</div>
<div class="line"><span class="lineno"> 1700</span>        <span class="comment">//-----------------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1701</span>        <span class="comment">//lis2mdl_magnetic_raw_get(&amp;lis2mdl_dev_ctx, raw_mag_data);</span></div>
<div class="line"><span class="lineno"> 1702</span> </div>
<div class="line"><span class="lineno"> 1703</span>        <span class="comment">//the_rest.mag_x = lis2mdl_from_lsb_to_nanotesla(raw_mag_data[0]);</span></div>
<div class="line"><span class="lineno"> 1704</span>        <span class="comment">//the_rest.mag_y = lis2mdl_from_lsb_to_nanotesla(raw_mag_data[1]);</span></div>
<div class="line"><span class="lineno"> 1705</span>        <span class="comment">//the_rest.mag_z = lis2mdl_from_lsb_to_nanotesla(raw_mag_data[1]);</span></div>
<div class="line"><span class="lineno"> 1706</span>        <span class="comment">//-----------------------------------------------------------------------------------------------------------------------</span></div>
<div class="line"><span class="lineno"> 1707</span>      }</div>
<div class="line"><span class="lineno"> 1708</span> </div>
<div class="line"><span class="lineno"> 1709</span>  }</div>
<div class="line"><span class="lineno"> 1710</span>  <span class="comment">/* USER CODE END 5 */</span></div>
<div class="line"><span class="lineno"> 1711</span>}</div>
<div class="ttc" id="abmp3_8c_html_a8b7c253abd6cd44aa260578a10395697"><div class="ttname"><a href="bmp3_8c.html#a8b7c253abd6cd44aa260578a10395697">bmp3_get_sensor_data</a></div><div class="ttdeci">int8_t bmp3_get_sensor_data(uint8_t sensor_comp, struct bmp3_data *comp_data, struct bmp3_dev *dev)</div><div class="ttdoc">This API reads the pressure, temperature or both data from the sensor, compensates the data and store...</div><div class="ttdef"><b>Definition</b> <a href="bmp3_8c_source.html#l01428">bmp3.c:1428</a></div></div>
<div class="ttc" id="abmp3__defs_8h_html_ab6b9e27977a4f9b87357e65c88a045b4"><div class="ttname"><a href="bmp3__defs_8h.html#ab6b9e27977a4f9b87357e65c88a045b4">BMP3_PRESS_TEMP</a></div><div class="ttdeci">#define BMP3_PRESS_TEMP</div><div class="ttdef"><b>Definition</b> <a href="bmp3__defs_8h_source.html#l00313">bmp3_defs.h:313</a></div></div>
<div class="ttc" id="agroup___l_s_m6_d_s_o32___data__output_html_ga07e215fa4bc8336ae979b86811b148ba"><div class="ttname"><a href="group___l_s_m6_d_s_o32___data__output.html#ga07e215fa4bc8336ae979b86811b148ba">lsm6dso32_angular_rate_raw_get</a></div><div class="ttdeci">int32_t lsm6dso32_angular_rate_raw_get(stmdev_ctx_t *ctx, int16_t *val)</div><div class="ttdoc">Angular rate sensor. The value is expressed as a 16-bit word in twos complement.[get].</div><div class="ttdef"><b>Definition</b> <a href="lsm6dso32__reg_8c_source.html#l01273">lsm6dso32_reg.c:1273</a></div></div>
<div class="ttc" id="agroup___l_s_m6_d_s_o32___data__output_html_gae8dc13475f3f44471dc2b3ffa5ccb4fd"><div class="ttname"><a href="group___l_s_m6_d_s_o32___data__output.html#gae8dc13475f3f44471dc2b3ffa5ccb4fd">lsm6dso32_acceleration_raw_get</a></div><div class="ttdeci">int32_t lsm6dso32_acceleration_raw_get(stmdev_ctx_t *ctx, int16_t *val)</div><div class="ttdoc">Linear acceleration output register. The value is expressed as a 16-bit word in twos complement....</div><div class="ttdef"><b>Definition</b> <a href="lsm6dso32__reg_8c_source.html#l01299">lsm6dso32_reg.c:1299</a></div></div>
<div class="ttc" id="agroup___l_s_m6_d_s_o32___sensitivity_html_gaccac5dfa532bb24e56084c864848866f"><div class="ttname"><a href="group___l_s_m6_d_s_o32___sensitivity.html#gaccac5dfa532bb24e56084c864848866f">lsm6dso32_from_fs16_to_mg</a></div><div class="ttdeci">float_t lsm6dso32_from_fs16_to_mg(int16_t lsb)</div><div class="ttdef"><b>Definition</b> <a href="lsm6dso32__reg_8c_source.html#l00107">lsm6dso32_reg.c:107</a></div></div>
<div class="ttc" id="agroup___l_s_m6_d_s_o32___sensitivity_html_gae57bfb3a87aed6927df02f9243ba2e42"><div class="ttname"><a href="group___l_s_m6_d_s_o32___sensitivity.html#gae57bfb3a87aed6927df02f9243ba2e42">lsm6dso32_from_fs2000_to_mdps</a></div><div class="ttdeci">float_t lsm6dso32_from_fs2000_to_mdps(int16_t lsb)</div><div class="ttdef"><b>Definition</b> <a href="lsm6dso32__reg_8c_source.html#l00137">lsm6dso32_reg.c:137</a></div></div>
<div class="ttc" id="amain_8c_html_a04d1b3a7e1ad0adeaef1258c70cc4524"><div class="ttname"><a href="main_8c.html#a04d1b3a7e1ad0adeaef1258c70cc4524">Temperature_1</a></div><div class="ttdeci">float_t Temperature_1</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00227">main.c:227</a></div></div>
<div class="ttc" id="amain_8c_html_a0cf7701595d4e09887c6fbecf62b4358"><div class="ttname"><a href="main_8c.html#a0cf7701595d4e09887c6fbecf62b4358">bmp390_1</a></div><div class="ttdeci">struct bmp3_dev bmp390_1</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00122">main.c:122</a></div></div>
<div class="ttc" id="amain_8c_html_a1564492831a79fa18466467c3420c3c3"><div class="ttname"><a href="main_8c.html#a1564492831a79fa18466467c3420c3c3">htim6</a></div><div class="ttdeci">TIM_HandleTypeDef htim6</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00066">main.c:66</a></div></div>
<div class="ttc" id="amain_8c_html_a18ec5937d9fba09d3004f1bc1d1703a7"><div class="ttname"><a href="main_8c.html#a18ec5937d9fba09d3004f1bc1d1703a7">first_measure</a></div><div class="ttdeci">bool first_measure</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00233">main.c:233</a></div></div>
<div class="ttc" id="amain_8c_html_a3a9e04f366240b4e25167160583ae165"><div class="ttname"><a href="main_8c.html#a3a9e04f366240b4e25167160583ae165">SENSOR_FLAG</a></div><div class="ttdeci">#define SENSOR_FLAG</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00283">main.c:283</a></div></div>
<div class="ttc" id="amain_8c_html_a407193f00ab88cb7ad11c975c076b279"><div class="ttname"><a href="main_8c.html#a407193f00ab88cb7ad11c975c076b279">num_of_lin_acc_saved</a></div><div class="ttdeci">uint32_t num_of_lin_acc_saved</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00311">main.c:311</a></div></div>
<div class="ttc" id="amain_8c_html_a4b69a1ec4b3b8c106bdf1dbb75b9f66e"><div class="ttname"><a href="main_8c.html#a4b69a1ec4b3b8c106bdf1dbb75b9f66e">data_raw_acceleration_1</a></div><div class="ttdeci">static int16_t data_raw_acceleration_1[3]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00130">main.c:130</a></div></div>
<div class="ttc" id="amain_8c_html_a5d03058d1155cc25fdb0d3c21465311e"><div class="ttname"><a href="main_8c.html#a5d03058d1155cc25fdb0d3c21465311e">Pressure_1</a></div><div class="ttdeci">float_t Pressure_1</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00226">main.c:226</a></div></div>
<div class="ttc" id="amain_8c_html_aaacbe7c48b34fa1fc39f740c7c233701"><div class="ttname"><a href="main_8c.html#aaacbe7c48b34fa1fc39f740c7c233701">imu_1</a></div><div class="ttdeci">stmdev_ctx_t imu_1</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00124">main.c:124</a></div></div>
<div class="ttc" id="amain_8c_html_ab3d16c9bfe2d2ad97914e702712b5f27"><div class="ttname"><a href="main_8c.html#ab3d16c9bfe2d2ad97914e702712b5f27">Kalman_mkfHandle</a></div><div class="ttdeci">osThreadId_t Kalman_mkfHandle</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00093">main.c:93</a></div></div>
<div class="ttc" id="amain_8c_html_ae28a866e269dd01ff1debbab1ffa5140"><div class="ttname"><a href="main_8c.html#ae28a866e269dd01ff1debbab1ffa5140">num_of_saved_rest_packages</a></div><div class="ttdeci">uint32_t num_of_saved_rest_packages</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00312">main.c:312</a></div></div>
<div class="ttc" id="amain_8c_html_ae521dc63b26dc48165784a1df0e198cb"><div class="ttname"><a href="main_8c.html#ae521dc63b26dc48165784a1df0e198cb">data_raw_angular_rate_1</a></div><div class="ttdeci">static int16_t data_raw_angular_rate_1[3]</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00129">main.c:129</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html_a1a2fafd0d26e5f2110bf602301f0d269"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html#a1a2fafd0d26e5f2110bf602301f0d269">Data_Package_no_Linear_IMU::altitude</a></div><div class="ttdeci">float_t altitude</div><div class="ttdoc">Calculated altitude above sea level in meters (m).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00178">main.c:178</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html_a33bdb898b864b670498f8039a12be835"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html#a33bdb898b864b670498f8039a12be835">Data_Package_no_Linear_IMU::dps_x</a></div><div class="ttdeci">float_t dps_x</div><div class="ttdoc">Angular rate around the X-axis in degrees per second (dps).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00167">main.c:167</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html_a780a2bebd8f276883f1f392bbdc30c0d"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html#a780a2bebd8f276883f1f392bbdc30c0d">Data_Package_no_Linear_IMU::pressure</a></div><div class="ttdeci">float_t pressure</div><div class="ttdoc">Atmospheric pressure in Pascals (Pa).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00176">main.c:176</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html_a7cadde8fcb2454af24efb4b2607d835e"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html#a7cadde8fcb2454af24efb4b2607d835e">Data_Package_no_Linear_IMU::dps_y</a></div><div class="ttdeci">float_t dps_y</div><div class="ttdoc">Angular rate around the Y-axis in dps.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00168">main.c:168</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html_aaf985a5bd9827ae4ea9ace6052b6e053"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html#aaf985a5bd9827ae4ea9ace6052b6e053">Data_Package_no_Linear_IMU::dps_z</a></div><div class="ttdeci">float_t dps_z</div><div class="ttdoc">Angular rate around the Z-axis in dps.</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00169">main.c:169</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html_ab310883b8de615287d3705231282dc69"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html#ab310883b8de615287d3705231282dc69">Data_Package_no_Linear_IMU::temperature</a></div><div class="ttdeci">float_t temperature</div><div class="ttdoc">Ambient temperature in degrees Celsius (C).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00175">main.c:175</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html_ac710f740e35961d1e6dd2db827bb9381"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html#ac710f740e35961d1e6dd2db827bb9381">Data_Package_no_Linear_IMU::phase</a></div><div class="ttdeci">float_t phase</div><div class="ttdoc">Current flight phase (as a floating point representation for memory alignment).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00180">main.c:180</a></div></div>
<div class="ttc" id="astruct_data___package__no___linear___i_m_u_html_acf2533947d57c772b6d17b14c596a48e"><div class="ttname"><a href="struct_data___package__no___linear___i_m_u.html#acf2533947d57c772b6d17b14c596a48e">Data_Package_no_Linear_IMU::velocity</a></div><div class="ttdeci">float_t velocity</div><div class="ttdoc">Calculated vertical velocity in meters per second (m/s).</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00179">main.c:179</a></div></div>
<div class="ttc" id="autilities_8c_html_a0d6ca98078136ccb4f8805fbdbc9d0a4"><div class="ttname"><a href="utilities_8c.html#a0d6ca98078136ccb4f8805fbdbc9d0a4">readAltitude</a></div><div class="ttdeci">float_t readAltitude(float_t seaLevelPa, float_t seaLevelT, float_t currentPa)</div><div class="ttdoc">Calculates altitude based on the barometric formula.</div><div class="ttdef"><b>Definition</b> <a href="utilities_8c_source.html#l00780">utilities.c:780</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8c_source.html#l00250">a_m</a>, <a class="el" href="flight__control_8h_source.html#l00038">ABCSDEPLOYED</a>, <a class="el" href="main_8c_source.html#l00132">acceleration_mg_1</a>, <a class="el" href="main_8c_source.html#l00178">Data_Package_no_Linear_IMU::altitude</a>, <a class="el" href="main_8c_source.html#l00224">altitude</a>, <a class="el" href="main_8c_source.html#l00133">angular_rate_mdps_1</a>, <a class="el" href="main_8c_source.html#l00126">barometer_data_1</a>, <a class="el" href="main_8c_source.html#l00122">bmp390_1</a>, <a class="el" href="bmp3_8c_source.html#l01428">bmp3_get_sensor_data()</a>, <a class="el" href="bmp3__defs_8h_source.html#l00313">BMP3_PRESS_TEMP</a>, <a class="el" href="flight__control_8h_source.html#l00037">BURNING</a>, <a class="el" href="flight__control_8h_source.html#l00035">CALIBRATING</a>, <a class="el" href="main_8c_source.html#l00309">data_buffer</a>, <a class="el" href="main_8c_source.html#l00130">data_raw_acceleration_1</a>, <a class="el" href="main_8c_source.html#l00129">data_raw_angular_rate_1</a>, <a class="el" href="main_8c_source.html#l00167">Data_Package_no_Linear_IMU::dps_x</a>, <a class="el" href="main_8c_source.html#l00168">Data_Package_no_Linear_IMU::dps_y</a>, <a class="el" href="main_8c_source.html#l00169">Data_Package_no_Linear_IMU::dps_z</a>, <a class="el" href="flight__control_8h_source.html#l00039">DROGUE</a>, <a class="el" href="main_8c_source.html#l00233">first_measure</a>, <a class="el" href="main_8c_source.html#l00307">flag_flash</a>, <a class="el" href="flight__control_8h_source.html#l00071">flight_fsm_t::flight_state</a>, <a class="el" href="main_8c_source.html#l00117">flight_state</a>, <a class="el" href="main_8c_source.html#l00293">gps_vel</a>, <a class="el" href="main_8c_source.html#l00066">htim6</a>, <a class="el" href="main_8c_source.html#l00124">imu_1</a>, <a class="el" href="flight__control_8h_source.html#l00034">INVALID</a>, <a class="el" href="main_8c_source.html#l00286">KALMAN_FLAG</a>, <a class="el" href="main_8c_source.html#l00093">Kalman_mkfHandle</a>, <a class="el" href="flight__control_8h_source.html#l00036">LIFTOFF</a>, <a class="el" href="lsm6dso32__reg_8c_source.html#l01299">lsm6dso32_acceleration_raw_get()</a>, <a class="el" href="lsm6dso32__reg_8c_source.html#l01273">lsm6dso32_angular_rate_raw_get()</a>, <a class="el" href="lsm6dso32__reg_8c_source.html#l00107">lsm6dso32_from_fs16_to_mg()</a>, <a class="el" href="lsm6dso32__reg_8c_source.html#l00137">lsm6dso32_from_fs2000_to_mdps()</a>, <a class="el" href="flight__control_8h_source.html#l00040">MAIN</a>, <a class="el" href="main_8c_source.html#l00311">num_of_lin_acc_saved</a>, <a class="el" href="main_8c_source.html#l00312">num_of_saved_rest_packages</a>, <a class="el" href="main_8c_source.html#l00313">num_of_saved_rest_packages_locked</a>, <a class="el" href="main_8c_source.html#l00240">omega</a>, <a class="el" href="main_8c_source.html#l00180">Data_Package_no_Linear_IMU::phase</a>, <a class="el" href="bmp3__defs_8h_source.html#l00847">bmp3_data::pressure</a>, <a class="el" href="main_8c_source.html#l00176">Data_Package_no_Linear_IMU::pressure</a>, <a class="el" href="main_8c_source.html#l00226">Pressure_1</a>, <a class="el" href="utilities_8c_source.html#l00780">readAltitude()</a>, <a class="el" href="main_8c_source.html#l00283">SENSOR_FLAG</a>, <a class="el" href="bmp3__defs_8h_source.html#l00844">bmp3_data::temperature</a>, <a class="el" href="main_8c_source.html#l00175">Data_Package_no_Linear_IMU::temperature</a>, <a class="el" href="main_8c_source.html#l00227">Temperature_1</a>, <a class="el" href="flight__control_8h_source.html#l00041">TOUCHDOWN</a>, <a class="el" href="main_8c_source.html#l00179">Data_Package_no_Linear_IMU::velocity</a>, <a class="el" href="main_8c_source.html#l00225">velocity</a>, and <a class="el" href="main_8c_source.html#l00248">z</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8c_source.html#l00399">main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks_ga3271a69550bc5f9966c76521e5823891_cgraph.png" border="0" usemap="#agroup___r_t_o_s___tasks_ga3271a69550bc5f9966c76521e5823891_cgraph" alt=""/></div>
<map name="agroup___r_t_o_s___tasks_ga3271a69550bc5f9966c76521e5823891_cgraph" id="agroup___r_t_o_s___tasks_ga3271a69550bc5f9966c76521e5823891_cgraph">
<area shape="rect" title="Function implementing the Sensor_Task thread." alt="" coords="5,215,131,241"/>
<area shape="rect" href="bmp3_8c.html#a8b7c253abd6cd44aa260578a10395697" title="This API reads the pressure, temperature or both data from the sensor, compensates the data and store..." alt="" coords="182,56,338,83"/>
<area shape="poly" title=" " alt="" coords="75,213,114,155,143,121,177,92,185,87,188,92,180,97,147,125,118,158,79,216"/>
<area shape="rect" href="group___l_s_m6_d_s_o32___data__output.html#gae8dc13475f3f44471dc2b3ffa5ccb4fd" title="Linear acceleration output register. The value is expressed as a 16&#45;bit word in twos complement...." alt="" coords="180,107,341,149"/>
<area shape="poly" title=" " alt="" coords="88,212,177,159,188,154,191,158,180,164,91,217"/>
<area shape="rect" href="group___l_s_m6_d_s_o32___data__output.html#ga07e215fa4bc8336ae979b86811b148ba" title="Angular rate sensor. The value is expressed as a 16&#45;bit word in twos complement.[get]." alt="" coords="179,173,342,216"/>
<area shape="poly" title=" " alt="" coords="130,215,163,209,164,214,131,220"/>
<area shape="rect" href="group___l_s_m6_d_s_o32___sensitivity.html#gaccac5dfa532bb24e56084c864848866f" title=" " alt="" coords="186,240,335,283"/>
<area shape="poly" title=" " alt="" coords="131,236,171,243,170,248,130,241"/>
<area shape="rect" href="group___l_s_m6_d_s_o32___sensitivity.html#gae57bfb3a87aed6927df02f9243ba2e42" title=" " alt="" coords="179,307,342,349"/>
<area shape="poly" title=" " alt="" coords="91,239,180,292,191,298,188,302,177,297,88,244"/>
<area shape="rect" href="utilities_8c.html#a0d6ca98078136ccb4f8805fbdbc9d0a4" title="Calculates altitude based on the barometric formula." alt="" coords="215,373,306,400"/>
<area shape="poly" title=" " alt="" coords="79,240,118,298,147,331,180,359,202,370,200,375,177,364,143,335,114,301,75,243"/>
<area shape="rect" href="bmp3_8c.html#a9e0c2cdecfdac8aa6ed4e35940f7ade7" title="This API reads the data from the given register address of the sensor." alt="" coords="406,5,516,32"/>
<area shape="poly" title=" " alt="" coords="316,53,390,34,391,39,317,58"/>
<area shape="rect" href="bmp3_8c.html#a6a344fb812afdfe92d84ad51ddd84faa" title="This internal API is used to compensate the pressure or temperature or both the data according to the..." alt="" coords="398,56,523,83"/>
<area shape="poly" title=" " alt="" coords="339,67,383,67,383,72,339,72"/>
<area shape="rect" href="bmp3_8c.html#a20da06fe77b3d93f19a83f6a0cd59b48" title="This internal API is used to parse the pressure and temperature data and store it in the bmp3_uncomp_..." alt="" coords="395,107,526,133"/>
<area shape="poly" title=" " alt="" coords="317,81,391,100,390,105,316,86"/>
<area shape="rect" href="bmp3_8c.html#a9db82f2117ddfa4eccef8a018e738aab" title="This internal API is used to validate the device pointer for null conditions." alt="" coords="611,5,716,32"/>
<area shape="poly" title=" " alt="" coords="516,16,595,16,595,21,516,21"/>
<area shape="rect" href="bmp3_8c.html#a5bc99f8ae95747be9edb8c36404e662f" title="This internal API is used to compensate the pressure data and return the compensated pressure data in..." alt="" coords="589,56,738,83"/>
<area shape="poly" title=" " alt="" coords="523,67,573,67,573,72,523,72"/>
<area shape="rect" href="bmp3_8c.html#a94a9c7724c9fa2b33cd588814062cfaf" title="This internal API is used to compensate the raw temperature data and return the compensated temperatu..." alt="" coords="579,107,748,133"/>
<area shape="poly" title=" " alt="" coords="518,81,593,100,592,105,517,86"/>
<area shape="rect" href="group___l_s_m6_d_s_o32___interfaces___functions.html#ga8a1c0ffbfeac9a6bc81cb213841ff622" title="Read generic device register." alt="" coords="390,169,531,196"/>
<area shape="poly" title=" " alt="" coords="342,147,395,162,394,167,340,152"/>
<area shape="poly" title=" " alt="" coords="342,187,375,185,375,190,342,192"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___r_t_o_s___tasks_ga3271a69550bc5f9966c76521e5823891_icgraph.png" border="0" usemap="#agroup___r_t_o_s___tasks_ga3271a69550bc5f9966c76521e5823891_icgraph" alt=""/></div>
<map name="agroup___r_t_o_s___tasks_ga3271a69550bc5f9966c76521e5823891_icgraph" id="agroup___r_t_o_s___tasks_ga3271a69550bc5f9966c76521e5823891_icgraph">
<area shape="rect" title="Function implementing the Sensor_Task thread." alt="" coords="103,5,228,32"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,32"/>
<area shape="poly" title=" " alt="" coords="87,21,55,21,55,16,87,16"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
